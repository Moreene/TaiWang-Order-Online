import{_ as R,u as q,i as f,s as D,C as W,k as z,o as c,c as d,l as v,a as t,b as n,F as x,t as u,d as I,n as F,r as H,e as l,m as V,w as $,f as h,Y as k,v as N,p as J,g as K}from"./index-GZPT54nk.js";import{a as M}from"./axios-G2rPRu76.js";import{t as b,S as Q}from"./sweetalert-fB6ucfd0.js";import{u as Y}from"./useCartStore-qS6C5yF9.js";import{P as Z}from"./ProgessBarComponent-DkgnA_ZS.js";import{L as G}from"./LoadingComponent-2GsBsRAm.js";const X="/TaiWang-Order-Online/empety-cart.png";var tt={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/TaiWang-Order-Online/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const s=m=>(J("data-v-f8b3d716"),m=m(),K(),m),et={class:"bg-wave"},st={class:"container"},ot={class:"col-lg-10 mx-auto"},nt={class:"mb-48"},at={key:0,class:"h5 bg-gray text-light ps-12 py-16 mb-0"},lt={class:"table table-borderless mb-0"},ct=s(()=>t("thead",{class:"border-bottom border-dark text-nowrap"},[t("tr",{class:"text-center"},[t("th",{scope:"col",style:{width:"180px"}},"示意圖"),t("th",{scope:"col"},"餐點名稱"),t("th",{scope:"col"},"單價"),t("th",{scope:"col",style:{width:"250px"}},"數量"),t("th",{scope:"col",class:"d-none d-md-block"},"小計"),t("th",{scope:"col"},"刪除")])],-1)),dt={class:"text-center text-nowrap"},it={scope:"row",class:"fw-normal"},rt=["src","alt"],_t={class:"text-notoSans"},pt={class:"d-flex justify-content-center"},ut={class:"input-group w-75 d-flex align-items-end"},ht=["onClick","disabled"],bt=s(()=>t("i",{class:"bi bi-dash"},null,-1)),mt=[bt],ft=["onUpdate:modelValue"],vt=["onClick"],yt=s(()=>t("i",{class:"bi bi-plus"},null,-1)),gt=[yt],xt={class:"d-none d-md-table-cell"},kt={class:"text-notoSans"},wt=["onClick"],Ct=s(()=>t("i",{class:"bi bi-trash fs-5 link-gray"},null,-1)),St=[Ct],Tt={class:"border border-dark border-top-0 bg-white p-12"},Bt={class:"d-flex justify-content-between"},It=s(()=>t("i",{class:"bi bi-arrow-right"},null,-1)),Vt=s(()=>t("span",{class:"text-notoSans d-inline-block p-6 bg-danger text-white me-6"},"優惠促銷",-1)),$t={class:"text-notoSans"},Nt={class:"row gy-48 gy-md-0 pb-72"},Mt={class:"col-md-7"},Pt=s(()=>t("h2",{class:"h5 bg-gray text-light ps-12 py-16 mb-0"},"取餐方式",-1)),At={class:"border border-dark bg-white"},Et={class:"ps-12 py-16"},Ut={class:"form-check form-check-inline"},jt=s(()=>t("label",{class:"form-check-label",for:"pickup"},"自取",-1)),Lt={class:"form-check form-check-inline"},Ot=["disabled"],Rt=s(()=>t("label",{class:"form-check-label",for:"delivery"},[l("外送 "),t("span",{class:"text-gray"},"(折扣後滿500元)")],-1)),qt={class:"border border-dark border-top-0 bg-white"},Dt=s(()=>t("h2",{class:"h5 bg-gray text-light ps-12 py-16 mb-0"},"送貨及付款方式",-1)),Wt={class:"ps-12 py-16"},zt={class:"mb-16"},Ft=s(()=>t("label",{for:"送貨方式",class:"form-label"},"送貨方式",-1)),Ht={key:0,type:"text",id:"送貨方式",class:"form-control w-75",value:"自取",disabled:""},Jt={key:1,type:"text",id:"送貨方式",class:"form-control w-75",value:"泰汪小蜜蜂",disabled:""},Kt=s(()=>t("div",null,[t("label",{for:"付款方式",class:"form-label"},"付款方式"),t("input",{type:"text",id:"付款方式",class:"form-control w-75",value:"信用卡 (支援VISA、JCB、Master)",disabled:""})],-1)),Qt={class:"col-md-5"},Yt={class:"h-100 border border-dark bg-white"},Zt=s(()=>t("h2",{class:"h5 bg-gray text-light ps-12 py-16 mb-0"},"訂單資訊",-1)),Gt={class:"border-bottom border-dark px-12 py-16"},Xt={class:"d-flex justify-content-between"},te=s(()=>t("p",null,"小計：",-1)),ee={class:"text-notoSans"},se=s(()=>t("div",{class:"d-flex justify-content-between"},[t("p",null,"運費："),t("p",null,[l("NT$ "),t("span",{class:"text-notoSans"},"0")])],-1)),oe=s(()=>t("p",{class:"mb-8"},"優惠代碼",-1)),ne={class:"d-flex"},ae=["disabled"],le={class:"px-12 py-24 pb-md-0"},ce={class:"d-flex justify-content-between"},de=s(()=>t("p",{class:"fw-bold"},"合計：",-1)),ie={class:"fw-bold"},re={class:"text-notoSans"},_e={key:0,class:"text-danger ms-4"},pe={key:1,class:"pb-72 text-center"},ue=s(()=>t("h2",{class:"mb-16"},"Oops,目前購物車內沒有東西唷！",-1)),he={class:"mb-32"},be=s(()=>t("img",{src:X,class:"empety-cart",alt:"空購物車"},null,-1)),me={__name:"CartView",setup(m){const{VITE_API:w,VITE_APIPATH:C}=tt,P=q(),_=f(""),r=f("自取"),y=f(!0),S=Y(),{cart:a}=D(S),{increaseCartNum:A,decreaseCartNum:E,getCart:T}=S;function U(i){const o=i.product.title;Q.mixin({customClass:{confirmButton:"btn btn-secondary text-light",cancelButton:"btn btn-outline-secondary me-16"},buttonsStyling:!1}).fire({title:`是否要刪除 ${o} ？`,icon:"warning",showCancelButton:!0,confirmButtonText:"是, 我要刪除",cancelButtonText:"我再想想",reverseButtons:!0}).then(e=>{e.isConfirmed&&M.delete(`${w}/api/${C}/cart/${i.id}`).then(()=>{b("top","warning",`已刪除 "${o}"`),T()}).catch(p=>{console.log(p)})})}function j(){const i={code:_.value};M.post(`${w}/api/${C}/coupon`,{data:i}).then(()=>{b("top","success","已成功使用優惠代碼"),T(),_.value=""}).catch(()=>{b("top","error","優惠代碼使用失敗"),_.value=""})}function L(){localStorage.setItem("pickUp",r.value),P.push("/orderInfo")}const B=f(null);function O(i){const o=B.value.innerText;navigator.clipboard.writeText(o).then(()=>{i.target.blur(),b("top","success","已成功複製優惠代碼")}).catch(()=>{b("top","error","複製優惠代碼失敗")})}return W(()=>a.value.final_total,i=>{typeof i<"u"&&Math.round(i)<500&&(r.value="自取")},{immediate:!0}),setTimeout(()=>y.value=!1,400),(i,o)=>{const g=z("RouterLink");return c(),d(x,null,[v(G,{active:y.value,"onUpdate:active":o[0]||(o[0]=e=>y.value=e)},null,8,["active"]),t("div",et,[t("div",st,[t("div",ot,[v(Z),n(a).carts&&n(a).carts.length?(c(),d(x,{key:0},[t("div",nt,[n(a).carts?(c(),d("h2",at,"購物車 ( "+u(n(a).carts.length)+" ) ",1)):I("",!0),t("div",{class:F(["table-responsive border border-dark",{"fixed-height":n(a).carts&&n(a).carts.length>3}])},[t("table",lt,[ct,t("tbody",dt,[(c(!0),d(x,null,H(n(a).carts,e=>(c(),d("tr",{key:e.id,class:"align-middle border-bottom"},[t("th",it,[t("img",{src:e.product.imageUrl,alt:e.product.title,class:"food-img"},null,8,rt)]),t("td",null,u(e.product.title),1),t("td",null,[l("NT$ "),t("span",_t,u(e.product.price),1)]),t("td",null,[t("div",pt,[t("div",ut,[t("button",{class:"btn btn-secondary text-light d-flex justify-content-center align-items-center d-none d-md-block",type:"button",onClick:p=>n(E)(e),disabled:e.qty===1},mt,8,ht),h(t("input",{type:"text",class:"form-control text-center p-0 py-md-6 px-md-12",min:"1","onUpdate:modelValue":p=>e.qty=p,readonly:""},null,8,ft),[[N,e.qty,void 0,{number:!0}]]),t("button",{class:"btn btn-secondary text-light d-flex justify-content-center align-items-center d-none d-md-block",type:"button",onClick:p=>n(A)(e)},gt,8,vt)])])]),t("td",xt,[l("NT$ "),t("span",kt,u(e.qty*e.product.price),1)]),t("td",null,[t("a",{href:"#",onClick:$(p=>U(e),["prevent"])},St,8,wt)])]))),128))])])],2),t("div",Tt,[t("p",Bt,[l("更多精彩優惠等著您使用！ "),v(g,{to:"/products",class:"link-gold"},{default:V(()=>[l("繼續購物 "),It]),_:1})]),Vt,t("span",$t,[l("輸入「 "),t("span",{ref_key:"code",ref:B},"tai6666",512),l(" 」優惠代碼再享 85 折 ﹙"),t("a",{href:"#",class:"link-danger",onClick:o[1]||(o[1]=$(e=>O(e),["prevent"]))},"點我複製"),l("﹚")])])]),t("div",Nt,[t("div",Mt,[Pt,t("div",At,[t("div",Et,[t("div",Ut,[Math.round(n(a).final_total)<500?h((c(),d("input",{key:0,class:"form-check-input border-gray",type:"radio",name:"取餐方式",id:"pickup",value:"自取","onUpdate:modelValue":o[2]||(o[2]=e=>r.value=e),checked:""},null,512)),[[k,r.value]]):h((c(),d("input",{key:1,class:"form-check-input border-gray",type:"radio",name:"取餐方式",id:"pickup",value:"自取","onUpdate:modelValue":o[3]||(o[3]=e=>r.value=e)},null,512)),[[k,r.value]]),jt]),t("div",Lt,[h(t("input",{class:"form-check-input border-gray",type:"radio",name:"取餐方式",id:"delivery",value:"外送","onUpdate:modelValue":o[4]||(o[4]=e=>r.value=e),disabled:Math.round(n(a).final_total)<500},null,8,Ot),[[k,r.value]]),Rt])])]),t("div",qt,[Dt,t("div",Wt,[t("div",zt,[Ft,r.value==="自取"||Math.round(n(a).final_total)<500?(c(),d("input",Ht)):(c(),d("input",Jt))]),Kt])])]),t("div",Qt,[t("div",Yt,[Zt,t("div",Gt,[t("div",Xt,[te,t("p",null,[l("NT$ "),t("span",ee,u(n(a).total),1)])]),se,oe,t("div",ne,[h(t("input",{type:"text",class:"form-control w-50 border-gray","onUpdate:modelValue":o[5]||(o[5]=e=>_.value=e)},null,512),[[N,_.value]]),t("button",{class:"btn btn-secondary text-light ms-8",type:"button",disabled:_.value==="",onClick:j},"套用",8,ae)])]),t("div",le,[t("div",ce,[de,t("p",ie,[l("NT$ "),t("span",re,u(Math.round(n(a).final_total)),1),n(a).final_total!==n(a).total?(c(),d("span",_e,"(已使用優惠)")):I("",!0)])]),t("button",{type:"button",class:"btn btn-primary text-white w-100",onClick:L},"下一步")])])])])],64)):(c(),d("div",pe,[ue,t("h2",he,[l("快去"),v(g,{to:"/products",class:"link-secondary border-bottom border-secondary"},{default:V(()=>[l("選購 ")]),_:1}),l(" 想吃餐點吧")]),be]))])])])],64)}}},we=R(me,[["__scopeId","data-v-f8b3d716"]]);export{we as default};
