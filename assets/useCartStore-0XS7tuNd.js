import{t as c}from"./sweetalert-8fODVnWy.js";import{Q as _,i as f}from"./index-Acea3fQg.js";import{a as r}from"./axios-G2rPRu76.js";var h={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/TaiWang-Order-Online/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:n,VITE_APIPATH:e}=h,P=_("cartStore",()=>{const s=f([]);function o(){r.get(`${n}/api/${e}/cart`).then(t=>{s.value=t.data.data}).catch(t=>{console.log(t)})}function d(t,a=1){const $={qty:a,product_id:t};r.post(`${n}/api/${e}/cart`,{data:$}).then(l=>{c("top","success",l.data.message),o()}).catch(()=>{c("top","warning","加入購物車失敗")})}function p(t){const a=t.product.title;r.delete(`${n}/api/${e}/cart/${t.id}`).then(()=>{c("top","warning",`已刪除 "${a}"`),o()}).catch(()=>{c("top","warning",`刪除 "${a}" 失敗`)})}function i(t){t.qty++;const a={product_id:t.product_id,qty:t.qty};r.put(`${n}/api/${e}/cart/${t.id}`,{data:a}).then(()=>{c("top","success",`已更新 ${t.product.title} 的數量`),o()}).catch(()=>{t.qty--,c("top","warning",`更新 ${t.product.title} 的數量失敗`)})}function u(t){t.qty--;const a={product_id:t.product_id,qty:t.qty};r.put(`${n}/api/${e}/cart/${t.id}`,{data:a}).then(()=>{c("top","success",`已更新 ${t.product.title} 的數量`),o()}).catch(()=>{t.qty++,c("top","warning",`更新 ${t.product.title} 的數量失敗`)})}return{cart:s,getCart:o,addCart:d,deleteItem:p,increaseCartNum:i,decreaseCartNum:u}});export{P as u};
