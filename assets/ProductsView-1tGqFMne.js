import{u as G}from"./useProductStore-FSFNROgg.js";import{u as z}from"./useCategoryStore-ZO_eMND0.js";import{B as H}from"./BannerComponent-Kol82DQ2.js";import{_ as F,P as M}from"./PaginationComponent-tWjCRU6h.js";import{L as X}from"./LoadingComponent-tQTno5Zf.js";import{N as q,O as S,i as I,s as V,u as J,P as K,k as Q,o as f,c as p,l as _,b as i,x as Y,m as Z,a as c,n as E,F as T,r as L,t as U,e as tt}from"./index-jpjlqHC5.js";import"./axios-G2rPRu76.js";import"./useCartStore-KlgxLiAS.js";import"./sweetalert-wF95ZFT_.js";var et="Expected a function",W=NaN,nt="[object Symbol]",rt=/^\s+|\s+$/g,ot=/^[-+]0x[0-9a-f]+$/i,at=/^0b[01]+$/i,st=/^0o[0-7]+$/i,it=parseInt,lt=typeof S=="object"&&S&&S.Object===Object&&S,ct=typeof self=="object"&&self&&self.Object===Object&&self,ut=lt||ct||Function("return this")(),dt=Object.prototype,ft=dt.toString,pt=Math.max,mt=Math.min,B=function(){return ut.Date.now()};function bt(t,r,o){var a,g,h,m,s,b,y=0,C=!1,d=!1,k=!0;if(typeof t!="function")throw new TypeError(et);r=A(r)||0,N(o)&&(C=!!o.leading,d="maxWait"in o,h=d?pt(A(o.maxWait)||0,r):h,k="trailing"in o?!!o.trailing:k);function x(n){var v=a,w=g;return a=g=void 0,y=n,m=t.apply(w,v),m}function P(n){return y=n,s=setTimeout(j,r),C?x(n):m}function u(n){var v=n-b,w=n-y,R=r-v;return d?mt(R,h-w):R}function l(n){var v=n-b,w=n-y;return b===void 0||v>=r||v<0||d&&w>=h}function j(){var n=B();if(l(n))return e(n);s=setTimeout(j,u(n))}function e(n){return s=void 0,k&&a?x(n):(a=g=void 0,m)}function O(){s!==void 0&&clearTimeout(s),y=0,a=b=g=s=void 0}function D(){return s===void 0?m:e(B())}function $(){var n=B(),v=l(n);if(a=arguments,g=this,b=n,v){if(s===void 0)return P(b);if(d)return s=setTimeout(j,r),x(b)}return s===void 0&&(s=setTimeout(j,r)),m}return $.cancel=O,$.flush=D,$}function N(t){var r=typeof t;return!!t&&(r=="object"||r=="function")}function gt(t){return!!t&&typeof t=="object"}function vt(t){return typeof t=="symbol"||gt(t)&&ft.call(t)==nt}function A(t){if(typeof t=="number")return t;if(vt(t))return W;if(N(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=N(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=t.replace(rt,"");var o=at.test(t);return o||st.test(t)?it(t.slice(2),o?2:8):ot.test(t)?W:+t}var yt=bt;const _t=q(yt),ht={class:"container"},kt={class:"py-72 py-lg-90"},xt={class:"d-flex flex-column flex-lg-row justify-content-lg-between mb-48"},jt={class:"nav nav-underline flex-nowrap text-nowrap overflow-x-auto mb-16 mb-lg-0",role:"tablist"},Tt={class:"nav-item",role:"presentation"},Ct=["id","aria-controls","data-bs-target","onClick"],Pt={class:"w-75 w-md-50 w-lg-25 d-flex justify-content-lg-end"},wt={class:"w-75"},St={class:"tab-content"},It={class:"row gy-48"},Ot={key:1,class:"mb-0 fs-6 text-center"},Ut={__name:"ProductsView",setup(t){const r=I([]),o=I(""),a=I([]),g=G(),{getProducts:h}=g,{products:m,isLoading:s}=V(g);h();const b=z(),{categories:y}=V(b);function C(u){r.value=u}const d=I(null),k=J();function x(u,l){l.target.blur(),d.value&&d.value.resetPage(),u==="products"?(o.value="",a.value=[],k.push("/products")):(o.value="",a.value=[],k.push(`/categories/${u}`))}const P=_t(u=>{o.value=u.target.value,o.value.trim()!==""?a.value=m.value.filter(l=>l.title.match(o.value)):a.value=[]},800);return K(()=>P.cancel()),(u,l)=>{const j=Q("RouterView");return f(),p(T,null,[_(X,{active:i(s),"onUpdate:active":l[0]||(l[0]=e=>Y(s)?s.value=e:null)},null,8,["active"]),_(H,null,{default:Z(()=>[tt("線上訂餐 / Menu")]),_:1}),c("div",ht,[c("div",kt,[c("div",xt,[c("ul",jt,[c("li",Tt,[c("button",{class:E(["nav-link fs-6",{active:u.$route.path==="/products"}]),id:"all-tab",type:"button",role:"tab","aria-controls":"all","data-bs-target":"#all","aria-selected":"true",onClick:l[1]||(l[1]=e=>x("products",e))},"所有餐點",2)]),(f(!0),p(T,null,L(i(y),e=>(f(),p("li",{key:e,class:"nav-item",role:"presentation"},[c("button",{class:E(["nav-link fs-6",{active:u.$route.path===`/categories/${e.path}`}]),id:e.name+"-tab",type:"button",role:"tab","aria-controls":e.name,"data-bs-target":"#"+e.name,"aria-selected":"false",onClick:O=>x(e.path,O)},U(e.name),11,Ct)]))),128))]),c("div",Pt,[c("div",wt,[c("input",{type:"text",class:"form-control rounded-0 border-top-0 border-start-0 border-end-0",placeholder:"請輸入關鍵字...",onInput:l[2]||(l[2]=(...e)=>i(P)&&i(P)(...e))},null,32)])])]),c("div",St,[c("div",{class:E(["tab-pane show",{active:u.$route.path==="/products"}]),id:"all",role:"tabpanel","aria-labelledby":"all-tab",tabindex:"0"},[c("div",It,[i(a).length?(f(),p(T,{key:0},[(f(!0),p(T,null,L(i(a),e=>(f(),p("div",{class:"col-md-4 col-lg-3 mb-48",key:e.id},[_(M,{item:e},null,8,["item"])]))),128)),_(F,{products:i(a),onUpdateProducts:C,ref_key:"pagination",ref:d},null,8,["products"])],64)):i(o)!==""&&!i(a).length?(f(),p("p",Ot,"抱歉，沒有符合「 "+U(i(o))+" 」的餐點唷！",1)):(f(),p(T,{key:2},[(f(!0),p(T,null,L(i(r),e=>(f(),p("div",{class:"col-md-4 col-lg-3 mb-48",key:e.id},[_(M,{item:e},null,8,["item"])]))),128)),_(F,{products:i(m),onUpdateProducts:C,ref_key:"pagination",ref:d},null,8,["products"])],64))])],2),_(j,{"match-products":i(a),"key-word":i(o)},null,8,["match-products","key-word"])])])])],64)}}};export{Ut as default};
