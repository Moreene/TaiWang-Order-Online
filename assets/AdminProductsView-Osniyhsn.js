import{i as b,C as N,k as B,o as i,c as d,a as e,l as n,m as D,f as L,v as J,n as g,F as A,r as S,t as $,_ as K,$ as j,p as Q,g as Z,e as H,G,w as F}from"./index-K39IQJEO.js";import{a as q}from"./axios-G2rPRu76.js";import{s as w,S as X}from"./sweetalert-QE_x3gEi.js";import{_ as Y}from"./AdminPaginationComponent-BVTGef45.js";import{M as R}from"./modal-3Iflh7Cd.js";var ee={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/TaiWang-Order-Online/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const te={class:"modal-dialog modal-dialog-centered modal-xl"},le={class:"modal-content border-0"},ae=e("h5",{id:"imageModalLabel",class:"modal-title"}," 編輯圖片 ",-1),oe={class:"modal-body p-24"},se={class:"row justify-content-evenly gy-48 gy-xl-0"},ne={class:"col-xl-5"},ie={class:"bg-dark-blue p-32 rounded-1"},de={class:"input-group mb-16"},re=e("p",{class:"text-white mb-8"},"複製圖片網址",-1),ce={class:"input-group mb-16"},ue=e("i",{class:"bi bi-copy"},null,-1),me=[ue],pe=e("p",{class:"text-white mb-8"},"圖片預覽",-1),be=["src"],ve={key:1,src:"https://fakeimg.pl/377x250/",alt:"圖片區",style:{width:"100%",height:"250px"}},_e={class:"col-xl-5"},fe={class:"mb-8"},he={class:"mb-16"},ge=e("label",{for:"imageUrl",class:"form-label"},"新增主圖",-1),ke={key:0,class:"mb-8"},ye=["for"],$e={key:0},xe={key:1},Ve={key:1},we=e("button",{type:"submit",class:"btn btn-dark-blue w-25"}," 確認 ",-1),Me={__name:"ImagesModalComponent",props:["tempProduct"],emits:["update","clearInput","closeModal"],setup(x,{expose:E,emit:T}){const{VITE_API:M,VITE_APIPATH:P}=ee,_=x,v=T,k=b(null),l=b({}),r=b(""),f=b(null);function h(s){const t=s.target.files[0],o=new FormData;o.append("file-to-upload",t),q.post(`${M}/api/${P}/admin/upload`,o).then(V=>{r.value=V.data.imageUrl,f.value.value=""}).catch(()=>{w("error","圖片上傳失敗")})}const I=b(null);function y(){navigator.clipboard.writeText(I.value.value).then(()=>{w("success","已複製圖片Url")}).catch(()=>{w("error","複製圖片Url失敗")})}function a(){const s={...l.value,imageUrl:l.value.imageUrl,imagesUrl:l.value.imagesUrl,hot:l.value.hot===!0?1:0,recommendation:l.value.recommendation===!0?1:0,is_enabled:l.value.is_enabled===!0?1:0};q.put(`${M}/api/${P}/admin/product/${s.id}`,{data:s}).then(t=>{w("success",t.data.message),v("update"),c(),v("closeModal")}).catch(t=>{w("error",t.response.data.message)})}function c(){r.value="",v("clearInput")}const m=b(null);function p(){m.value.resetForm()}return N(()=>_.tempProduct,s=>{l.value={...s}}),E({imageModal:k,resetForm:p}),(s,t)=>{const o=B("v-field"),V=B("error-message"),O=B("v-form");return i(),d("div",{id:"imageModal",ref_key:"imageModal",ref:k,class:"modal fade",tabindex:"-1","aria-labelledby":"imageModalLabel","aria-hidden":"true"},[e("div",te,[e("div",le,[e("div",{class:"modal-header bg-dark-blue text-white"},[ae,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:c})]),n(O,{ref_key:"form",ref:m,onSubmit:a},{default:D(({errors:z})=>[e("div",oe,[e("div",se,[e("div",ne,[e("div",ie,[e("div",de,[e("input",{type:"file",class:"form-control","aria-label":"Upload",name:"file-to-upload",onChange:t[0]||(t[0]=U=>h(U)),ref_key:"fileInput",ref:f},null,544)]),re,e("div",ce,[L(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=U=>r.value=U),ref_key:"imgUrl",ref:I},null,512),[[J,r.value]]),e("button",{class:"btn btn-gray",type:"button",onClick:y},me)]),pe,r.value?(i(),d("img",{key:0,src:r.value,alt:"圖片預覽",style:{width:"100%",height:"200px"}},null,8,be)):(i(),d("img",ve))])]),e("div",_e,[e("div",fe,[e("div",he,[ge,n(o,{id:"imageUrl",name:"主圖連結",type:"text",class:g(["form-control",{"is-invalid":z.主圖連結}]),modelValue:l.value.imageUrl,"onUpdate:modelValue":t[2]||(t[2]=U=>l.value.imageUrl=U),placeholder:"請輸入圖片連結",rules:"required"},null,8,["modelValue","class"]),n(V,{name:"主圖連結",class:"invalid-feedback"})])]),l.value.imagesUrl?(i(),d("div",ke,[(i(!0),d(A,null,S(l.value.imagesUrl,(U,C)=>(i(),d("div",{class:"mb-16",key:"img"+C},[e("label",{for:"imageURL"+(C+1),class:"form-label"},"副圖"+$(C+1),9,ye),n(o,{id:"imageURL"+(C+1),name:"副圖"+(C+1),type:"text",class:g(["form-control",{"is-invalid":z["副圖"+(C+1)]}]),modelValue:l.value.imagesUrl[C],"onUpdate:modelValue":W=>l.value.imagesUrl[C]=W,placeholder:"請輸入副圖連結",rules:"required"},null,8,["id","name","modelValue","onUpdate:modelValue","class"]),n(V,{name:"副圖"+(C+1),class:"invalid-feedback"},null,8,["name"])]))),128)),!l.value.imagesUrl.length||l.value.imagesUrl.at(-1).trim()?(i(),d("div",$e,[e("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[3]||(t[3]=U=>l.value.imagesUrl.push(""))}," 新增圖片 ")])):(i(),d("div",xe,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm d-block w-100",onClick:t[4]||(t[4]=U=>l.value.imagesUrl.pop())}," 刪除圖片 ")]))])):(i(),d("div",Ve,[e("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[5]||(t[5]=U=>l.value.imagesUrl=[l.value.imageUrl,""])}," 新增圖片 ")]))])])]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-outline-dark-blue w-25","data-bs-dismiss":"modal",onClick:c}," 取消 "),we])]),_:1},512)])])],512)}}};var Pe={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/TaiWang-Order-Online/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const u=x=>(Q("data-v-eb4d3e6c"),x=x(),Z(),x),Ie={class:"modal-dialog modal-dialog-centered modal-xl"},Ue={class:"modal-content border-0"},Ce={class:"modal-header bg-primary text-white"},Ae={id:"productModalLabel",class:"modal-title"},Ee={class:"modal-body"},Te={class:"col-10 mx-auto"},Se={class:"mb-16"},Be=u(()=>e("label",{for:"title",class:"form-label"},"餐點名稱",-1)),qe={class:"row"},De={class:"col-md-6 mb-16"},Le=u(()=>e("label",{for:"select",class:"form-label"},"餐點分類",-1)),Oe=u(()=>e("option",{value:"",disabled:"",selected:""},"請選擇餐點分類",-1)),Fe=u(()=>e("option",{value:"開胃涼拌"},"開胃涼拌",-1)),Re=u(()=>e("option",{value:"大口吃肉"},"大口吃肉",-1)),je=u(()=>e("option",{value:"大口吃菜"},"大口吃菜",-1)),ze=u(()=>e("option",{value:"泰鮮海鮮"},"泰鮮海鮮",-1)),Ne=u(()=>e("option",{value:"來一點飯"},"來一點飯",-1)),He=u(()=>e("option",{value:"冰涼泰飲"},"冰涼泰飲",-1)),We=u(()=>e("option",{value:"泰式甜點"},"泰式甜點",-1)),Je={class:"col-md-6 mb-16"},Ke=u(()=>e("label",{for:"unit",class:"form-label"},"單位",-1)),Qe={class:"row"},Ze={class:"col-md-6 mb-16"},Ge=u(()=>e("label",{for:"origin_price",class:"form-label"},"原價",-1)),Xe={class:"col-md-6 mb-16"},Ye=u(()=>e("label",{for:"price",class:"form-label"},"售價",-1)),et={class:"mb-16"},tt=u(()=>e("label",{class:"form-label"},"餐點成分",-1)),lt=u(()=>e("nav",null,[e("div",{class:"nav nav-tabs flex-nowrap",id:"nav-tab",role:"tablist"},[e("button",{class:"nav-link link-dark active",id:"meat-tab","data-bs-toggle":"tab","data-bs-target":"#meat",type:"button",role:"tab","aria-controls":"meat","aria-selected":"true"},"肉品"),e("button",{class:"nav-link link-dark",id:"seafood-tab","data-bs-toggle":"tab","data-bs-target":"#seafood",type:"button",role:"tab","aria-controls":"seafood","aria-selected":"false"},"海鮮"),e("button",{class:"nav-link link-dark",id:"vegetable-tab","data-bs-toggle":"tab","data-bs-target":"#vegetable",type:"button",role:"tab","aria-controls":"vegetable","aria-selected":"false"},"蔬果"),e("button",{class:"nav-link link-dark",id:"seasoning-tab","data-bs-toggle":"tab","data-bs-target":"#seasoning",type:"button",role:"tab","aria-controls":"seasoning","aria-selected":"false"},"調味"),e("button",{class:"nav-link link-dark",id:"rice-tab","data-bs-toggle":"tab","data-bs-target":"#rice",type:"button",role:"tab","aria-controls":"rice","aria-selected":"false"},"米飯"),e("button",{class:"nav-link link-dark",id:"others-tab","data-bs-toggle":"tab","data-bs-target":"#others",type:"button",role:"tab","aria-controls":"others","aria-selected":"false"},"其他")])],-1)),at={class:"tab-content",id:"nav-tabContent"},ot={class:"tab-pane show active pt-16 px-16",id:"meat",role:"tabpanel","aria-labelledby":"meat-tab",tabindex:"0"},st=["for"],nt={class:"tab-pane pt-16 px-16",id:"seafood",role:"tabpanel","aria-labelledby":"seafood-tab",tabindex:"0"},it=["for"],dt={class:"tab-pane pt-16 px-16",id:"vegetable",role:"tabpanel","aria-labelledby":"vegetable-tab",tabindex:"0"},rt=["for"],ct={class:"tab-pane pt-16 px-16",id:"seasoning",role:"tabpanel","aria-labelledby":"seasoning-tab",tabindex:"0"},ut=["for"],mt={class:"tab-pane pt-16 px-16",id:"rice",role:"tabpanel","aria-labelledby":"rice-tab",tabindex:"0"},pt=["for"],bt={class:"tab-pane pt-16 px-16",id:"others",role:"tabpanel","aria-labelledby":"others-tab",tabindex:"0"},vt=["for"],_t=u(()=>e("span",{class:"text-danger",style:{"font-size":"14px"}},"至少選擇一種食材",-1)),ft={class:"mb-16"},ht=u(()=>e("label",{for:"description",class:"form-label"},"餐點描述",-1)),gt={class:"mb-16"},kt=u(()=>e("label",{for:"note",class:"form-label"},"餐點備註",-1)),yt=u(()=>e("hr",null,null,-1)),$t={class:"row mb-16"},xt={class:"col-6"},Vt={class:"form-check"},wt=u(()=>e("label",{class:"form-check-label",for:"hotFood"}," 暢銷餐點 ",-1)),Mt={class:"col-6"},Pt={class:"form-check"},It=u(()=>e("label",{class:"form-check-label",for:"recommendation"}," 主廚推薦 ",-1)),Ut={class:"modal-footer"},Ct=u(()=>e("button",{type:"submit",class:"btn btn-primary text-white w-20"}," 確認 ",-1)),At={__name:"ProductModalComponent",props:["tempProduct","isNew"],emits:["update","clearInput","closeModal"],setup(x,{expose:E,emit:T}){const{VITE_API:M,VITE_APIPATH:P}=Pe,_=x,v=T,k=b(null),l=b({}),r=b({meat:["雞肉","雞腿","豬肉","松阪豬","豬肋骨"],seafood:["白蝦","草蝦","蛤蜊","花枝","中卷","花枝漿","鱸魚"],vegetable:["辣椒","大蒜","薑"," 香茅","香菜","紅蔥頭","泰國茄子","檸檬","小番茄","草菇","蘑菇","乾檸檬葉","青木瓜","玉米筍","洋蔥","小黃瓜","青蔥","青椒","花椰菜","胡蘿蔔","紅甜椒","高麗菜","四季豆","空心菜","長豆","芋頭","地瓜","椰子","椰蓉肉","紅石榴","香蕉","紅毛丹","菠蘿蜜"],seasoning:["糖","魚露","泰國蠔油","乾蝦米","蝦膏","蝦醬","米酒","玉米粉","白胡椒粉","麵包粉","花生"],rice:["紅藜米","茉莉香米"],others:["椰奶","椰漿","牛奶","煉乳","淡奶","麵粉","鹹蛋","蛋","奶油","錫蘭紅茶茶葉","綠茶","泰國神童牌紅糖水","西米露"]});function f(){const y={...l.value,hot:l.value.hot===!0?1:0,recommendation:l.value.recommendation===!0?1:0,is_enabled:l.value.is_enabled===!0?1:0};let a=`${M}/api/${P}/admin/product/${y.id}`,c="put";_.isNew&&(a=`${M}/api/${P}/admin/product`,c="post"),q[c](a,{data:y}).then(m=>{w("success",m.data.message),v("update"),v("clearInput"),v("closeModal")}).catch(m=>{w("error",m.response.data.message)})}const h=b(null);function I(){h.value.resetForm()}return N(()=>_.tempProduct,y=>{l.value={...y}}),E({productModal:k,resetForm:I}),(y,a)=>{const c=B("v-field"),m=B("error-message"),p=B("v-form");return i(),d("div",{id:"productModal",ref_key:"productModal",ref:k,class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},[e("div",Ie,[e("div",Ue,[e("div",Ce,[e("h5",Ae,[e("span",null,$(l.value.title?l.value.title:"新增餐點內容"),1)]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:a[0]||(a[0]=s=>y.$emit("clearInput"))})]),n(p,{ref_key:"form",ref:h,onSubmit:f},{default:D(({errors:s})=>[e("div",Ee,[e("div",Te,[e("div",Se,[Be,n(c,{id:"title",name:"餐點名稱",type:"text",class:g(["form-control",{"is-invalid":s.餐點名稱}]),modelValue:l.value.title,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.title=t),placeholder:"請輸入餐點名稱",rules:"required"},null,8,["modelValue","class"]),n(m,{name:"餐點名稱",class:"invalid-feedback"})]),e("div",qe,[e("div",De,[Le,n(c,{as:"select",id:"select",name:"餐點分類",class:g(["form-select",{"is-invalid":s.餐點分類}]),modelValue:l.value.category,"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.category=t),rules:"required",placeholder:"請選擇餐點分類"},{default:D(()=>[Oe,Fe,Re,je,ze,Ne,He,We]),_:2},1032,["modelValue","class"]),n(m,{name:"餐點分類",class:"invalid-feedback"})]),e("div",Je,[Ke,n(c,{id:"unit",name:"單位",type:"text",class:g(["form-control",{"is-invalid":s.單位}]),modelValue:l.value.unit,"onUpdate:modelValue":a[3]||(a[3]=t=>l.value.unit=t),placeholder:"請輸入單位",rules:"required"},null,8,["modelValue","class"]),n(m,{name:"單位",class:"invalid-feedback"})])]),e("div",Qe,[e("div",Ze,[Ge,n(c,{id:"origin_price",name:"原價",type:"number",min:"0",class:g(["form-control",{"is-invalid":s.原價}]),modelValue:l.value.origin_price,"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.origin_price=t),modelModifiers:{number:!0},placeholder:"請輸入原價",rules:"required"},null,8,["modelValue","class"]),n(m,{name:"原價",class:"invalid-feedback"})]),e("div",Xe,[Ye,n(c,{id:"price",name:"售價",type:"number",min:"0",class:g(["form-control",{"is-invalid":s.售價}]),modelValue:l.value.price,"onUpdate:modelValue":a[5]||(a[5]=t=>l.value.price=t),modelModifiers:{number:!0},placeholder:"請輸入售價",rules:"required"},null,8,["modelValue","class"]),n(m,{name:"售價",class:"invalid-feedback"})])]),e("div",et,[tt,lt,e("div",at,[e("div",ot,[(i(!0),d(A,null,S(r.value.meat,t=>(i(),d("div",{class:"form-check form-check-inline",key:t},[n(c,{name:"ingredient",type:"checkbox",class:g(["form-check-input",{"is-invalid":s.ingredient}]),value:t,id:t,modelValue:l.value.ingredient,"onUpdate:modelValue":a[6]||(a[6]=o=>l.value.ingredient=o),rules:"required"},null,8,["value","id","modelValue","class"]),e("label",{class:"form-check-label",for:t},$(t),9,st)]))),128))]),e("div",nt,[(i(!0),d(A,null,S(r.value.seafood,t=>(i(),d("div",{class:"form-check form-check-inline",key:t},[n(c,{name:"ingredient",type:"checkbox",class:g(["form-check-input",{"is-invalid":s.ingredient}]),value:t,id:t,modelValue:l.value.ingredient,"onUpdate:modelValue":a[7]||(a[7]=o=>l.value.ingredient=o),rules:"required"},null,8,["value","id","modelValue","class"]),e("label",{class:"form-check-label",for:t},$(t),9,it)]))),128))]),e("div",dt,[(i(!0),d(A,null,S(r.value.vegetable,t=>(i(),d("div",{class:"form-check form-check-inline",key:t},[n(c,{name:"ingredient",type:"checkbox",class:g(["form-check-input",{"is-invalid":s.ingredient}]),value:t,id:t,modelValue:l.value.ingredient,"onUpdate:modelValue":a[8]||(a[8]=o=>l.value.ingredient=o),rules:"required"},null,8,["value","id","modelValue","class"]),e("label",{class:"form-check-label",for:t},$(t),9,rt)]))),128))]),e("div",ct,[(i(!0),d(A,null,S(r.value.seasoning,t=>(i(),d("div",{class:"form-check form-check-inline",key:t},[n(c,{name:"ingredient",type:"checkbox",class:g(["form-check-input",{"is-invalid":s.ingredient}]),value:t,id:t,modelValue:l.value.ingredient,"onUpdate:modelValue":a[9]||(a[9]=o=>l.value.ingredient=o),rules:"required"},null,8,["value","id","modelValue","class"]),e("label",{class:"form-check-label",for:t},$(t),9,ut)]))),128))]),e("div",mt,[(i(!0),d(A,null,S(r.value.rice,t=>(i(),d("div",{class:"form-check form-check-inline",key:t},[n(c,{name:"ingredient",type:"checkbox",class:g(["form-check-input",{"is-invalid":s.ingredient}]),value:t,id:t,modelValue:l.value.ingredient,"onUpdate:modelValue":a[10]||(a[10]=o=>l.value.ingredient=o),rules:"required"},null,8,["value","id","modelValue","class"]),e("label",{class:"form-check-label",for:t},$(t),9,pt)]))),128))]),e("div",bt,[(i(!0),d(A,null,S(r.value.others,t=>(i(),d("div",{class:"form-check form-check-inline",key:t},[n(c,{name:"ingredient",type:"checkbox",class:g(["form-check-input",{"is-invalid":s.ingredient}]),value:t,id:t,modelValue:l.value.ingredient,"onUpdate:modelValue":a[11]||(a[11]=o=>l.value.ingredient=o),rules:"required"},null,8,["value","id","modelValue","class"]),e("label",{class:"form-check-label",for:t},$(t),9,vt)]))),128))]),n(m,{name:"ingredient",class:"invalid-feedback"},{default:D(()=>[_t]),_:1})])]),e("div",ft,[ht,n(c,{as:"textarea",id:"description",name:"餐點描述",class:g(["form-control",{"is-invalid":s.餐點描述}]),modelValue:l.value.description,"onUpdate:modelValue":a[12]||(a[12]=t=>l.value.description=t),placeholder:"請輸入餐點描述",rules:"required"},null,8,["modelValue","class"]),n(m,{name:"餐點描述",class:"invalid-feedback"})]),e("div",gt,[kt,n(c,{id:"note",name:"餐點備註",type:"text",class:g(["form-control",{"is-invalid":s.餐點備註}]),modelValue:l.value.note,"onUpdate:modelValue":a[13]||(a[13]=t=>l.value.note=t),modelModifiers:{number:!0},placeholder:"請輸入餐點備註",rules:"required"},null,8,["modelValue","class"]),n(m,{name:"餐點備註",class:"invalid-feedback"})]),yt,e("div",$t,[e("div",xt,[e("div",Vt,[L(e("input",{class:"form-check-input",type:"checkbox",value:"是",id:"hotFood","onUpdate:modelValue":a[14]||(a[14]=t=>l.value.hot=t)},null,512),[[j,l.value.hot]]),wt])]),e("div",Mt,[e("div",Pt,[L(e("input",{class:"form-check-input",type:"checkbox",value:"是",id:"recommendation","onUpdate:modelValue":a[15]||(a[15]=t=>l.value.recommendation=t)},null,512),[[j,l.value.recommendation]]),It])])])])]),e("div",Ut,[e("button",{type:"button",class:"btn btn-outline-primary w-20 me-16","data-bs-dismiss":"modal",onClick:a[16]||(a[16]=t=>y.$emit("clearInput"))}," 取消 "),Ct])]),_:1},512)])])],512)}}},Et=K(At,[["__scopeId","data-v-eb4d3e6c"]]);var Tt={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/TaiWang-Order-Online/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const St={class:"modal-dialog modal-dialog-centered"},Bt={class:"modal-content border-0"},qt={class:"modal-header bg-danger text-white"},Dt={id:"delProductModalLabel",class:"modal-title"},Lt=e("i",{class:"bi bi-exclamation-circle"},null,-1),Ot={class:"modal-body text-center p-24"},Ft={class:"fs-5"},Rt={class:"modal-footer border-0 justify-content-center"},jt={__name:"DelProductModalComponent",props:["tempProduct"],emits:["update","clearInput","closeModal"],setup(x,{expose:E,emit:T}){const{VITE_API:M,VITE_APIPATH:P}=Tt,_=x,v=T,k=b(null);function l(){q.delete(`${M}/api/${P}/admin/product/${_.tempProduct.id}`).then(r=>{w("success",r.data.message),v("update"),v("clearInput"),v("closeModal")}).catch(r=>{w("error",r.response.data.message)})}return E({delProductModal:k}),(r,f)=>(i(),d("div",{id:"delProductModal",ref_key:"delProductModal",ref:k,class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},[e("div",St,[e("div",Bt,[e("div",qt,[e("h5",Dt,[e("span",null,[Lt,H(" "+$(x.tempProduct.title),1)])]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:f[0]||(f[0]=h=>r.$emit("clearInput"))})]),e("div",Ot,[e("span",Ft,'是否要刪除 "'+$(x.tempProduct.title)+'" ？',1)]),e("div",Rt,[e("button",{type:"button",class:"btn btn-outline-danger w-25","data-bs-dismiss":"modal",onClick:f[1]||(f[1]=h=>r.$emit("clearInput"))}," 取消 "),e("button",{type:"button",class:"btn btn-danger w-25",onClick:l}," 確認 ")])])])],512))}};var zt={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/TaiWang-Order-Online/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Nt={class:"container py-144"},Ht=e("h2",{class:"fw-bold mb-32"},"餐點列表",-1),Wt={class:"text-end mb-24"},Jt=e("i",{class:"bi bi-plus"},null,-1),Kt={class:"table-responsive mb-16"},Qt={class:"table align-middle"},Zt=e("thead",{class:"text-nowrap"},[e("tr",{class:"text-nowrap text-center border-dark"},[e("th",{width:"120"}," 商品照 "),e("th",{width:"120"}," 分類 "),e("th",{width:"120"}," 餐點名稱 "),e("th",{width:"120"}," 原價 "),e("th",{width:"120"}," 售價 "),e("th",{width:"100"}," 是否啟用 "),e("th",{width:"120"}," 編輯圖片 "),e("th",{width:"120"}," 編輯內容 "),e("th",{width:"120"}," 刪除 ")])],-1),Gt={class:"text-nowrap text-center"},Xt=["src","alt"],Yt={class:"form-check form-switch d-flex justify-content-center"},el=["onUpdate:modelValue","onChange"],tl=["onClick"],ll=e("i",{class:"bi bi-image fs-5"},null,-1),al=[ll],ol=["onClick"],sl=e("i",{class:"bi bi-pencil-square fs-5"},null,-1),nl=[sl],il=["onClick"],dl=e("i",{class:"bi bi-trash3 fs-5"},null,-1),rl=[dl],vl={__name:"AdminProductsView",setup(x){const{VITE_API:E,VITE_APIPATH:T}=zt,M=b([]),P=b({}),_=b({imagesUrl:[]}),v=b(!1),k=b(!1);function l(p=1){k.value=!0,q.get(`${E}/api/${T}/admin/products?page=${p}`).then(s=>{const t=s.data.products;M.value=t.map(o=>({...o,hot:o.hot===1,recommendation:o.recommendation===1,is_enabled:o.is_enabled===1})),P.value=s.data.pagination,k.value=!1}).catch(s=>{k.value=!1,w("error",s.response.data.message)})}function r(p){const s=!p.is_enabled,t=X.mixin({customClass:{confirmButton:"btn btn-secondary text-light",cancelButton:"btn btn-outline-secondary me-16"},buttonsStyling:!1});t.fire({title:"是否要更新啟用狀態？",icon:"warning",showCancelButton:!0,confirmButtonText:"是, 我要更新",cancelButtonText:"我再想想",reverseButtons:!0}).then(o=>{if(o.isConfirmed){const V=!s,O={...p,hot:p.hot===!0?1:0,recommendation:p.recommendation===!0?1:0,is_enabled:V?1:0};q.put(`${E}/api/${T}/admin/product/${p.id}`,{data:O}).then(()=>{t.fire({title:`已更新 ${p.title} 的啟用狀態`,icon:"success",showConfirmButton:!1,timer:2e3})}).catch(()=>{w("error","更新啟用狀態失敗")})}else p.is_enabled=s})}const f=b(null),h=b(null),I=b(null);function y(p,s){p==="new"?(_.value={},v.value=!0,h.value.productModal.value.show()):p==="edit"?(_.value={...s},v.value=!1,h.value.productModal.value.show()):p==="images"?(_.value={...s},v.value=!1,f.value.imageModal.value.show()):p==="delete"&&(_.value={...s},v.value=!1,I.value.delProductModal.value.show())}function a(){_.value={imagesUrl:[]},h.value.resetForm()}function c(){_.value={imagesUrl:[]},h.value.resetForm(),f.value.resetForm()}function m(){h.value.productModal.value.hide(),I.value.delProductModal.value.hide(),f.value.imageModal.value.hide()}return G(()=>{h.value.productModal.value=new R(h.value.productModal,{keyboard:!1}),I.value.delProductModal.value=new R(I.value.delProductModal,{keyboard:!1}),f.value.imageModal.value=new R(f.value.imageModal,{keyboard:!1}),l()}),(p,s)=>{const t=B("VueLoading");return i(),d(A,null,[n(t,{active:k.value,"onUpdate:active":s[0]||(s[0]=o=>k.value=o),loader:"bars",color:"#ff9900"},null,8,["active"]),e("div",Nt,[Ht,e("div",Wt,[e("button",{type:"button",class:"btn btn-primary text-light",onClick:s[1]||(s[1]=o=>y("new"))},[H(" 建立新餐點 "),Jt])]),e("div",Kt,[e("table",Qt,[Zt,e("tbody",Gt,[(i(!0),d(A,null,S(M.value,o=>(i(),d("tr",{key:o.id},[e("td",null,[e("img",{src:o.imageUrl,alt:o.title,style:{width:"160px",height:"120px"}},null,8,Xt)]),e("td",null,$(o.category),1),e("td",null,$(o.title),1),e("td",null,$(o.origin_price),1),e("td",null,$(o.price),1),e("td",null,[e("div",Yt,[L(e("input",{class:"form-check-input",type:"checkbox",role:"switch",style:{height:"20px"},"onUpdate:modelValue":V=>o.is_enabled=V,onChange:V=>r(o)},null,40,el),[[j,o.is_enabled]])])]),e("td",null,[e("a",{href:"#",class:"link-dark-blue",onClick:F(V=>y("images",o),["prevent"])},al,8,tl)]),e("td",null,[e("a",{href:"#",class:"link-primary",onClick:F(V=>y("edit",o),["prevent"])},nl,8,ol)]),e("td",null,[e("a",{href:"#",class:"link-danger",onClick:F(V=>y("delete",o),["prevent"])},rl,8,il)])]))),128))])])]),n(Y,{pagination:P.value,onEmitPages:l},null,8,["pagination"]),n(Me,{ref_key:"imageModal",ref:f,"temp-product":_.value,onClearInput:c,onCloseModal:m,onUpdate:l},null,8,["temp-product"]),n(Et,{ref_key:"modal",ref:h,"temp-product":_.value,"is-new":v.value,onClearInput:a,onCloseModal:m,onUpdate:l},null,8,["temp-product","is-new"]),n(jt,{ref_key:"delModal",ref:I,"temp-product":_.value,onClearInput:a,onCloseModal:m,onUpdate:l},null,8,["temp-product"])])],64)}}};export{vl as default};
