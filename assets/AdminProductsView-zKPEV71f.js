import{i as _,C as H,k as q,o as d,c as r,a as e,l as i,m as L,f as O,v as Q,b as a,x as W,n as y,F as E,r as B,t as x,_ as Z,$ as z,p as G,g as X,e as J,G as Y,w as R}from"./index-Acea3fQg.js";import{s as M,S as ee}from"./sweetalert-8fODVnWy.js";import{a as D}from"./axios-G2rPRu76.js";import{_ as te}from"./AdminPaginationComponent-NrRvEIUk.js";import{M as j}from"./modal-qYYGS3Lr.js";var le={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/TaiWang-Order-Online/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ae={class:"modal-dialog modal-dialog-centered modal-xl"},oe={class:"modal-content border-0"},se=e("h5",{id:"imageModalLabel",class:"modal-title"}," 編輯圖片 ",-1),ne={class:"modal-body p-24"},ie={class:"row justify-content-evenly gy-48 gy-xl-0"},de={class:"col-xl-5"},re={class:"bg-dark-blue p-32 rounded-1"},ce={class:"input-group mb-16"},ue=e("p",{class:"text-white mb-8"},"複製圖片網址",-1),me={class:"input-group mb-16"},pe=e("i",{class:"bi bi-copy"},null,-1),be=[pe],_e=e("p",{class:"text-white mb-8"},"圖片預覽",-1),ve=["src"],fe={key:1,src:"https://fakeimg.pl/377x250/",alt:"圖片區",style:{width:"100%",height:"250px"}},he={class:"col-xl-5"},ge={class:"mb-8"},ke={class:"mb-16"},ye=e("label",{for:"imageUrl",class:"form-label"},"新增主圖",-1),$e={key:0,class:"mb-8"},xe=["for"],Ve={key:0},we={key:1},Me={key:1},Pe=e("button",{type:"submit",class:"btn btn-dark-blue w-25"}," 確認 ",-1),Ie={__name:"ImagesModalComponent",props:["tempProduct"],emits:["update","clearInput","closeModal"],setup(V,{expose:T,emit:S}){const{VITE_API:P,VITE_APIPATH:I}=le,f=V,v=S,g=_(null),l=_({}),c=_(""),h=_(null);function k(n){const t=n.target.files[0],s=new FormData;s.append("file-to-upload",t),D.post(`${P}/api/${I}/admin/upload`,s).then(w=>{c.value=w.data.imageUrl,h.value.value=""}).catch(()=>{M("error","圖片上傳失敗")})}const U=_(null);function $(){navigator.clipboard.writeText(U.value.value).then(()=>{M("success","已複製圖片Url")}).catch(()=>{M("error","複製圖片Url失敗")})}function o(){const n={...l.value,imageUrl:l.value.imageUrl,imagesUrl:l.value.imagesUrl,hot:l.value.hot===!0?1:0,recommendation:l.value.recommendation===!0?1:0,is_enabled:l.value.is_enabled===!0?1:0};D.put(`${P}/api/${I}/admin/product/${n.id}`,{data:n}).then(t=>{M("success",t.data.message),v("update"),u(),v("closeModal")}).catch(t=>{M("error",t.response.data.message)})}function u(){c.value="",v("clearInput")}const p=_(null);function b(){p.value.resetForm()}return H(()=>f.tempProduct,n=>{l.value={...n}}),T({imageModal:g,resetForm:b}),(n,t)=>{const s=q("v-field"),w=q("error-message"),F=q("v-form");return d(),r("div",{id:"imageModal",ref_key:"imageModal",ref:g,class:"modal fade",tabindex:"-1","aria-labelledby":"imageModalLabel","aria-hidden":"true"},[e("div",ae,[e("div",oe,[e("div",{class:"modal-header bg-dark-blue text-white"},[se,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:u})]),i(F,{ref_key:"form",ref:p,onSubmit:o},{default:L(({errors:N})=>[e("div",ne,[e("div",ie,[e("div",de,[e("div",re,[e("div",ce,[e("input",{type:"file",class:"form-control","aria-label":"Upload",name:"file-to-upload",onChange:t[0]||(t[0]=C=>k(C)),ref_key:"fileInput",ref:h},null,544)]),ue,e("div",me,[O(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=C=>W(c)?c.value=C:null),ref_key:"imgUrl",ref:U},null,512),[[Q,a(c)]]),e("button",{class:"btn btn-gray",type:"button",onClick:$},be)]),_e,a(c)?(d(),r("img",{key:0,src:a(c),alt:"圖片預覽",style:{width:"100%",height:"200px"}},null,8,ve)):(d(),r("img",fe))])]),e("div",he,[e("div",ge,[e("div",ke,[ye,i(s,{id:"imageUrl",name:"主圖連結",type:"text",class:y(["form-control",{"is-invalid":N.主圖連結}]),modelValue:a(l).imageUrl,"onUpdate:modelValue":t[2]||(t[2]=C=>a(l).imageUrl=C),placeholder:"請輸入圖片連結",rules:"required"},null,8,["modelValue","class"]),i(w,{name:"主圖連結",class:"invalid-feedback"})])]),a(l).imagesUrl?(d(),r("div",$e,[(d(!0),r(E,null,B(a(l).imagesUrl,(C,A)=>(d(),r("div",{class:"mb-16",key:"img"+A},[e("label",{for:"imageURL"+(A+1),class:"form-label"},"副圖"+x(A+1),9,xe),i(s,{id:"imageURL"+(A+1),name:"副圖"+(A+1),type:"text",class:y(["form-control",{"is-invalid":N["副圖"+(A+1)]}]),modelValue:a(l).imagesUrl[A],"onUpdate:modelValue":K=>a(l).imagesUrl[A]=K,placeholder:"請輸入副圖連結",rules:"required"},null,8,["id","name","modelValue","onUpdate:modelValue","class"]),i(w,{name:"副圖"+(A+1),class:"invalid-feedback"},null,8,["name"])]))),128)),!a(l).imagesUrl.length||a(l).imagesUrl.at(-1).trim()?(d(),r("div",Ve,[e("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[3]||(t[3]=C=>a(l).imagesUrl.push(""))}," 新增圖片 ")])):(d(),r("div",we,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm d-block w-100",onClick:t[4]||(t[4]=C=>a(l).imagesUrl.pop())}," 刪除圖片 ")]))])):(d(),r("div",Me,[e("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[5]||(t[5]=C=>a(l).imagesUrl=[a(l).imageUrl,""])}," 新增圖片 ")]))])])]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-outline-dark-blue w-25","data-bs-dismiss":"modal",onClick:u}," 取消 "),Pe])]),_:1},512)])])],512)}}};var Ue={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/TaiWang-Order-Online/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const m=V=>(G("data-v-3bc22118"),V=V(),X(),V),Ce={class:"modal-dialog modal-dialog-centered modal-xl"},Ae={class:"modal-content border-0"},Ee={class:"modal-header bg-primary text-white"},Te={id:"productModalLabel",class:"modal-title"},Se={class:"modal-body"},Be={class:"col-10 mx-auto"},qe={class:"mb-16"},De=m(()=>e("label",{for:"title",class:"form-label"},"餐點名稱",-1)),Le={class:"row"},Oe={class:"col-md-6 mb-16"},Fe=m(()=>e("label",{for:"select",class:"form-label"},"餐點分類",-1)),Re=m(()=>e("option",{value:"",disabled:"",selected:""},"請選擇餐點分類",-1)),je=m(()=>e("option",{value:"開胃涼拌"},"開胃涼拌",-1)),ze=m(()=>e("option",{value:"大口吃肉"},"大口吃肉",-1)),Ne=m(()=>e("option",{value:"大口吃菜"},"大口吃菜",-1)),He=m(()=>e("option",{value:"泰鮮海鮮"},"泰鮮海鮮",-1)),We=m(()=>e("option",{value:"來一點飯"},"來一點飯",-1)),Je=m(()=>e("option",{value:"冰涼泰飲"},"冰涼泰飲",-1)),Ke=m(()=>e("option",{value:"泰式甜點"},"泰式甜點",-1)),Qe={class:"col-md-6 mb-16"},Ze=m(()=>e("label",{for:"unit",class:"form-label"},"單位",-1)),Ge={class:"row"},Xe={class:"col-md-6 mb-16"},Ye=m(()=>e("label",{for:"origin_price",class:"form-label"},"原價",-1)),et={class:"col-md-6 mb-16"},tt=m(()=>e("label",{for:"price",class:"form-label"},"售價",-1)),lt={class:"mb-16"},at=m(()=>e("label",{class:"form-label"},"餐點成分",-1)),ot=m(()=>e("nav",null,[e("div",{class:"nav nav-tabs flex-nowrap",id:"nav-tab",role:"tablist"},[e("button",{class:"nav-link link-dark active",id:"meat-tab","data-bs-toggle":"tab","data-bs-target":"#meat",type:"button",role:"tab","aria-controls":"meat","aria-selected":"true"},"肉品"),e("button",{class:"nav-link link-dark",id:"seafood-tab","data-bs-toggle":"tab","data-bs-target":"#seafood",type:"button",role:"tab","aria-controls":"seafood","aria-selected":"false"},"海鮮"),e("button",{class:"nav-link link-dark",id:"vegetable-tab","data-bs-toggle":"tab","data-bs-target":"#vegetable",type:"button",role:"tab","aria-controls":"vegetable","aria-selected":"false"},"蔬果"),e("button",{class:"nav-link link-dark",id:"seasoning-tab","data-bs-toggle":"tab","data-bs-target":"#seasoning",type:"button",role:"tab","aria-controls":"seasoning","aria-selected":"false"},"調味"),e("button",{class:"nav-link link-dark",id:"rice-tab","data-bs-toggle":"tab","data-bs-target":"#rice",type:"button",role:"tab","aria-controls":"rice","aria-selected":"false"},"米飯"),e("button",{class:"nav-link link-dark",id:"others-tab","data-bs-toggle":"tab","data-bs-target":"#others",type:"button",role:"tab","aria-controls":"others","aria-selected":"false"},"其他")])],-1)),st={class:"tab-content",id:"nav-tabContent"},nt={class:"tab-pane show active pt-16 px-16",id:"meat",role:"tabpanel","aria-labelledby":"meat-tab",tabindex:"0"},it=["for"],dt={class:"tab-pane pt-16 px-16",id:"seafood",role:"tabpanel","aria-labelledby":"seafood-tab",tabindex:"0"},rt=["for"],ct={class:"tab-pane pt-16 px-16",id:"vegetable",role:"tabpanel","aria-labelledby":"vegetable-tab",tabindex:"0"},ut=["for"],mt={class:"tab-pane pt-16 px-16",id:"seasoning",role:"tabpanel","aria-labelledby":"seasoning-tab",tabindex:"0"},pt=["for"],bt={class:"tab-pane pt-16 px-16",id:"rice",role:"tabpanel","aria-labelledby":"rice-tab",tabindex:"0"},_t=["for"],vt={class:"tab-pane pt-16 px-16",id:"others",role:"tabpanel","aria-labelledby":"others-tab",tabindex:"0"},ft=["for"],ht=m(()=>e("span",{class:"text-danger",style:{"font-size":"14px"}},"至少選擇一種食材",-1)),gt={class:"mb-16"},kt=m(()=>e("label",{for:"description",class:"form-label"},"餐點描述",-1)),yt={class:"mb-16"},$t=m(()=>e("label",{for:"note",class:"form-label"},"餐點備註",-1)),xt=m(()=>e("hr",null,null,-1)),Vt={class:"row mb-16"},wt={class:"col-6"},Mt={class:"form-check"},Pt=m(()=>e("label",{class:"form-check-label",for:"hotFood"}," 暢銷餐點 ",-1)),It={class:"col-6"},Ut={class:"form-check"},Ct=m(()=>e("label",{class:"form-check-label",for:"recommendation"}," 主廚推薦 ",-1)),At={class:"modal-footer"},Et=m(()=>e("button",{type:"submit",class:"btn btn-primary text-white w-20"}," 確認 ",-1)),Tt={__name:"ProductModalComponent",props:["tempProduct","isNew"],emits:["update","clearInput","closeModal"],setup(V,{expose:T,emit:S}){const{VITE_API:P,VITE_APIPATH:I}=Ue,f=V,v=S,g=_(null),l=_({}),c=_({meat:["雞肉","雞腿","豬肉","松阪豬","豬肋骨"],seafood:["白蝦","草蝦","蛤蜊","花枝","中卷","花枝漿","鱸魚"],vegetable:["辣椒","大蒜","薑"," 香茅","香菜","紅蔥頭","泰國茄子","檸檬","小番茄","草菇","蘑菇","乾檸檬葉","青木瓜","玉米筍","洋蔥","小黃瓜","青蔥","青椒","花椰菜","胡蘿蔔","紅甜椒","高麗菜","四季豆","空心菜","長豆","芋頭","地瓜","椰子","椰蓉肉","紅石榴","香蕉","紅毛丹","菠蘿蜜"],seasoning:["糖","魚露","泰國蠔油","乾蝦米","蝦膏","蝦醬","米酒","玉米粉","白胡椒粉","麵包粉","花生"],rice:["紅藜米","茉莉香米"],others:["椰奶","椰漿","牛奶","煉乳","淡奶","麵粉","鹹蛋","蛋","奶油","錫蘭紅茶茶葉","綠茶","泰國神童牌紅糖水","西米露"]});function h(){const $={...l.value,hot:l.value.hot===!0?1:0,recommendation:l.value.recommendation===!0?1:0,is_enabled:l.value.is_enabled===!0?1:0};let o=`${P}/api/${I}/admin/product/${$.id}`,u="put";f.isNew&&(o=`${P}/api/${I}/admin/product`,u="post"),D[u](o,{data:$}).then(p=>{M("success",p.data.message),v("update"),v("clearInput"),v("closeModal")}).catch(p=>{M("error",p.response.data.message)})}const k=_(null);function U(){k.value.resetForm()}return H(()=>f.tempProduct,$=>{l.value={...$}}),T({productModal:g,resetForm:U}),($,o)=>{const u=q("v-field"),p=q("error-message"),b=q("v-form");return d(),r("div",{id:"productModal",ref_key:"productModal",ref:g,class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},[e("div",Ce,[e("div",Ae,[e("div",Ee,[e("h5",Te,[e("span",null,x(a(l).title?a(l).title:"新增餐點內容"),1)]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o[0]||(o[0]=n=>$.$emit("clearInput"))})]),i(b,{ref_key:"form",ref:k,onSubmit:h},{default:L(({errors:n})=>[e("div",Se,[e("div",Be,[e("div",qe,[De,i(u,{id:"title",name:"餐點名稱",type:"text",class:y(["form-control",{"is-invalid":n.餐點名稱}]),modelValue:a(l).title,"onUpdate:modelValue":o[1]||(o[1]=t=>a(l).title=t),placeholder:"請輸入餐點名稱",rules:"required"},null,8,["modelValue","class"]),i(p,{name:"餐點名稱",class:"invalid-feedback"})]),e("div",Le,[e("div",Oe,[Fe,i(u,{as:"select",id:"select",name:"餐點分類",class:y(["form-select",{"is-invalid":n.餐點分類}]),modelValue:a(l).category,"onUpdate:modelValue":o[2]||(o[2]=t=>a(l).category=t),rules:"required",placeholder:"請選擇餐點分類"},{default:L(()=>[Re,je,ze,Ne,He,We,Je,Ke]),_:2},1032,["modelValue","class"]),i(p,{name:"餐點分類",class:"invalid-feedback"})]),e("div",Qe,[Ze,i(u,{id:"unit",name:"單位",type:"text",class:y(["form-control",{"is-invalid":n.單位}]),modelValue:a(l).unit,"onUpdate:modelValue":o[3]||(o[3]=t=>a(l).unit=t),placeholder:"請輸入單位",rules:"required"},null,8,["modelValue","class"]),i(p,{name:"單位",class:"invalid-feedback"})])]),e("div",Ge,[e("div",Xe,[Ye,i(u,{id:"origin_price",name:"原價",type:"number",min:"0",class:y(["form-control",{"is-invalid":n.原價}]),modelValue:a(l).origin_price,"onUpdate:modelValue":o[4]||(o[4]=t=>a(l).origin_price=t),modelModifiers:{number:!0},placeholder:"請輸入原價",rules:"required"},null,8,["modelValue","class"]),i(p,{name:"原價",class:"invalid-feedback"})]),e("div",et,[tt,i(u,{id:"price",name:"售價",type:"number",min:"0",class:y(["form-control",{"is-invalid":n.售價}]),modelValue:a(l).price,"onUpdate:modelValue":o[5]||(o[5]=t=>a(l).price=t),modelModifiers:{number:!0},placeholder:"請輸入售價",rules:"required"},null,8,["modelValue","class"]),i(p,{name:"售價",class:"invalid-feedback"})])]),e("div",lt,[at,ot,e("div",st,[e("div",nt,[(d(!0),r(E,null,B(a(c).meat,t=>(d(),r("div",{class:"form-check form-check-inline",key:t},[i(u,{name:"ingredient",type:"checkbox",class:y(["form-check-input",{"is-invalid":n.ingredient}]),value:t,id:t,modelValue:a(l).ingredient,"onUpdate:modelValue":o[6]||(o[6]=s=>a(l).ingredient=s),rules:"required"},null,8,["value","id","modelValue","class"]),e("label",{class:"form-check-label",for:t},x(t),9,it)]))),128))]),e("div",dt,[(d(!0),r(E,null,B(a(c).seafood,t=>(d(),r("div",{class:"form-check form-check-inline",key:t},[i(u,{name:"ingredient",type:"checkbox",class:y(["form-check-input",{"is-invalid":n.ingredient}]),value:t,id:t,modelValue:a(l).ingredient,"onUpdate:modelValue":o[7]||(o[7]=s=>a(l).ingredient=s),rules:"required"},null,8,["value","id","modelValue","class"]),e("label",{class:"form-check-label",for:t},x(t),9,rt)]))),128))]),e("div",ct,[(d(!0),r(E,null,B(a(c).vegetable,t=>(d(),r("div",{class:"form-check form-check-inline",key:t},[i(u,{name:"ingredient",type:"checkbox",class:y(["form-check-input",{"is-invalid":n.ingredient}]),value:t,id:t,modelValue:a(l).ingredient,"onUpdate:modelValue":o[8]||(o[8]=s=>a(l).ingredient=s),rules:"required"},null,8,["value","id","modelValue","class"]),e("label",{class:"form-check-label",for:t},x(t),9,ut)]))),128))]),e("div",mt,[(d(!0),r(E,null,B(a(c).seasoning,t=>(d(),r("div",{class:"form-check form-check-inline",key:t},[i(u,{name:"ingredient",type:"checkbox",class:y(["form-check-input",{"is-invalid":n.ingredient}]),value:t,id:t,modelValue:a(l).ingredient,"onUpdate:modelValue":o[9]||(o[9]=s=>a(l).ingredient=s),rules:"required"},null,8,["value","id","modelValue","class"]),e("label",{class:"form-check-label",for:t},x(t),9,pt)]))),128))]),e("div",bt,[(d(!0),r(E,null,B(a(c).rice,t=>(d(),r("div",{class:"form-check form-check-inline",key:t},[i(u,{name:"ingredient",type:"checkbox",class:y(["form-check-input",{"is-invalid":n.ingredient}]),value:t,id:t,modelValue:a(l).ingredient,"onUpdate:modelValue":o[10]||(o[10]=s=>a(l).ingredient=s),rules:"required"},null,8,["value","id","modelValue","class"]),e("label",{class:"form-check-label",for:t},x(t),9,_t)]))),128))]),e("div",vt,[(d(!0),r(E,null,B(a(c).others,t=>(d(),r("div",{class:"form-check form-check-inline",key:t},[i(u,{name:"ingredient",type:"checkbox",class:y(["form-check-input",{"is-invalid":n.ingredient}]),value:t,id:t,modelValue:a(l).ingredient,"onUpdate:modelValue":o[11]||(o[11]=s=>a(l).ingredient=s),rules:"required"},null,8,["value","id","modelValue","class"]),e("label",{class:"form-check-label",for:t},x(t),9,ft)]))),128))]),i(p,{name:"ingredient",class:"invalid-feedback"},{default:L(()=>[ht]),_:1})])]),e("div",gt,[kt,i(u,{as:"textarea",id:"description",name:"餐點描述",class:y(["form-control",{"is-invalid":n.餐點描述}]),modelValue:a(l).description,"onUpdate:modelValue":o[12]||(o[12]=t=>a(l).description=t),placeholder:"請輸入餐點描述",rules:"required"},null,8,["modelValue","class"]),i(p,{name:"餐點描述",class:"invalid-feedback"})]),e("div",yt,[$t,i(u,{id:"note",name:"餐點備註",type:"text",class:y(["form-control",{"is-invalid":n.餐點備註}]),modelValue:a(l).note,"onUpdate:modelValue":o[13]||(o[13]=t=>a(l).note=t),modelModifiers:{number:!0},placeholder:"請輸入餐點備註",rules:"required"},null,8,["modelValue","class"]),i(p,{name:"餐點備註",class:"invalid-feedback"})]),xt,e("div",Vt,[e("div",wt,[e("div",Mt,[O(e("input",{class:"form-check-input",type:"checkbox",value:"是",id:"hotFood","onUpdate:modelValue":o[14]||(o[14]=t=>a(l).hot=t)},null,512),[[z,a(l).hot]]),Pt])]),e("div",It,[e("div",Ut,[O(e("input",{class:"form-check-input",type:"checkbox",value:"是",id:"recommendation","onUpdate:modelValue":o[15]||(o[15]=t=>a(l).recommendation=t)},null,512),[[z,a(l).recommendation]]),Ct])])])])]),e("div",At,[e("button",{type:"button",class:"btn btn-outline-primary w-20 me-16","data-bs-dismiss":"modal",onClick:o[16]||(o[16]=t=>$.$emit("clearInput"))}," 取消 "),Et])]),_:1},512)])])],512)}}},St=Z(Tt,[["__scopeId","data-v-3bc22118"]]);var Bt={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/TaiWang-Order-Online/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const qt={class:"modal-dialog modal-dialog-centered"},Dt={class:"modal-content border-0"},Lt={class:"modal-header bg-danger text-white"},Ot={id:"delProductModalLabel",class:"modal-title"},Ft=e("i",{class:"bi bi-exclamation-circle"},null,-1),Rt={class:"modal-body text-center p-24"},jt={class:"fs-5"},zt={class:"modal-footer border-0 justify-content-center"},Nt={__name:"DelProductModalComponent",props:["tempProduct"],emits:["update","clearInput","closeModal"],setup(V,{expose:T,emit:S}){const{VITE_API:P,VITE_APIPATH:I}=Bt,f=V,v=S,g=_(null);function l(){D.delete(`${P}/api/${I}/admin/product/${f.tempProduct.id}`).then(c=>{M("success",c.data.message),v("update"),v("clearInput"),v("closeModal")}).catch(c=>{M("error",c.response.data.message)})}return T({delProductModal:g}),(c,h)=>(d(),r("div",{id:"delProductModal",ref_key:"delProductModal",ref:g,class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},[e("div",qt,[e("div",Dt,[e("div",Lt,[e("h5",Ot,[e("span",null,[Ft,J(" "+x(V.tempProduct.title),1)])]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:h[0]||(h[0]=k=>c.$emit("clearInput"))})]),e("div",Rt,[e("span",jt,'是否要刪除 "'+x(V.tempProduct.title)+'" ？',1)]),e("div",zt,[e("button",{type:"button",class:"btn btn-outline-danger w-25","data-bs-dismiss":"modal",onClick:h[1]||(h[1]=k=>c.$emit("clearInput"))}," 取消 "),e("button",{type:"button",class:"btn btn-danger w-25",onClick:l}," 確認 ")])])])],512))}};var Ht={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/TaiWang-Order-Online/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Wt={class:"container py-144"},Jt=e("h2",{class:"fw-bold mb-32"},"餐點列表",-1),Kt={class:"text-end mb-24"},Qt=e("i",{class:"bi bi-plus"},null,-1),Zt={class:"table-responsive mb-16"},Gt={class:"table align-middle"},Xt=e("thead",{class:"text-nowrap"},[e("tr",{class:"text-nowrap text-center border-dark"},[e("th",{width:"120"}," 商品照 "),e("th",{width:"120"}," 分類 "),e("th",{width:"120"}," 餐點名稱 "),e("th",{width:"120"}," 原價 "),e("th",{width:"120"}," 售價 "),e("th",{width:"100"}," 是否啟用 "),e("th",{width:"120"}," 編輯圖片 "),e("th",{width:"120"}," 編輯內容 "),e("th",{width:"120"}," 刪除 ")])],-1),Yt={class:"text-nowrap text-center"},el=["src","alt"],tl={class:"form-check form-switch d-flex justify-content-center"},ll=["onUpdate:modelValue","onChange"],al=["onClick"],ol=e("i",{class:"bi bi-image fs-5"},null,-1),sl=[ol],nl=["onClick"],il=e("i",{class:"bi bi-pencil-square fs-5"},null,-1),dl=[il],rl=["onClick"],cl=e("i",{class:"bi bi-trash3 fs-5"},null,-1),ul=[cl],fl={__name:"AdminProductsView",setup(V){const{VITE_API:T,VITE_APIPATH:S}=Ht,P=_([]),I=_({}),f=_({imagesUrl:[]}),v=_(!1),g=_(!1);function l(b=1){g.value=!0,D.get(`${T}/api/${S}/admin/products?page=${b}`).then(n=>{const t=n.data.products;P.value=t.map(s=>({...s,hot:s.hot===1,recommendation:s.recommendation===1,is_enabled:s.is_enabled===1})),I.value=n.data.pagination,g.value=!1}).catch(n=>{g.value=!1,M("error",n.response.data.message)})}function c(b){const n=!b.is_enabled,t=ee.mixin({customClass:{confirmButton:"btn btn-secondary text-light",cancelButton:"btn btn-outline-secondary me-16"},buttonsStyling:!1});t.fire({title:"是否要更新啟用狀態？",icon:"warning",showCancelButton:!0,confirmButtonText:"是, 我要更新",cancelButtonText:"我再想想",reverseButtons:!0}).then(s=>{if(s.isConfirmed){const w=!n,F={...b,hot:b.hot===!0?1:0,recommendation:b.recommendation===!0?1:0,is_enabled:w?1:0};D.put(`${T}/api/${S}/admin/product/${b.id}`,{data:F}).then(()=>{t.fire({title:`已更新 ${b.title} 的啟用狀態`,icon:"success",showConfirmButton:!1,timer:2e3})}).catch(()=>{M("error","更新啟用狀態失敗")})}else b.is_enabled=n})}const h=_(null),k=_(null),U=_(null);function $(b,n){b==="new"?(f.value={},v.value=!0,k.value.productModal.value.show()):b==="edit"?(f.value={...n},v.value=!1,k.value.productModal.value.show()):b==="images"?(f.value={...n},v.value=!1,h.value.imageModal.value.show()):b==="delete"&&(f.value={...n},v.value=!1,U.value.delProductModal.value.show())}function o(){f.value={imagesUrl:[]},k.value.resetForm()}function u(){f.value={imagesUrl:[]},k.value.resetForm(),h.value.resetForm()}function p(){k.value.productModal.value.hide(),U.value.delProductModal.value.hide(),h.value.imageModal.value.hide()}return Y(()=>{k.value.productModal.value=new j(k.value.productModal,{keyboard:!1}),U.value.delProductModal.value=new j(U.value.delProductModal,{keyboard:!1}),h.value.imageModal.value=new j(h.value.imageModal,{keyboard:!1}),l()}),(b,n)=>{const t=q("VueLoading");return d(),r(E,null,[i(t,{active:a(g),"onUpdate:active":n[0]||(n[0]=s=>W(g)?g.value=s:null),loader:"bars",color:"#ff9900"},null,8,["active"]),e("div",Wt,[Jt,e("div",Kt,[e("button",{type:"button",class:"btn btn-primary text-light",onClick:n[1]||(n[1]=s=>$("new"))},[J(" 建立新餐點 "),Qt])]),e("div",Zt,[e("table",Gt,[Xt,e("tbody",Yt,[(d(!0),r(E,null,B(a(P),s=>(d(),r("tr",{key:s.id},[e("td",null,[e("img",{src:s.imageUrl,alt:s.title,style:{width:"160px",height:"120px"}},null,8,el)]),e("td",null,x(s.category),1),e("td",null,x(s.title),1),e("td",null,x(s.origin_price),1),e("td",null,x(s.price),1),e("td",null,[e("div",tl,[O(e("input",{class:"form-check-input",type:"checkbox",role:"switch",style:{height:"20px"},"onUpdate:modelValue":w=>s.is_enabled=w,onChange:w=>c(s)},null,40,ll),[[z,s.is_enabled]])])]),e("td",null,[e("a",{href:"#",class:"link-dark-blue",onClick:R(w=>$("images",s),["prevent"])},sl,8,al)]),e("td",null,[e("a",{href:"#",class:"link-primary",onClick:R(w=>$("edit",s),["prevent"])},dl,8,nl)]),e("td",null,[e("a",{href:"#",class:"link-danger",onClick:R(w=>$("delete",s),["prevent"])},ul,8,rl)])]))),128))])])]),i(te,{pagination:a(I),onEmitPages:l},null,8,["pagination"]),i(Ie,{ref_key:"imageModal",ref:h,"temp-product":a(f),onClearInput:u,onCloseModal:p,onUpdate:l},null,8,["temp-product"]),i(St,{ref_key:"modal",ref:k,"temp-product":a(f),"is-new":a(v),onClearInput:o,onCloseModal:p,onUpdate:l},null,8,["temp-product","is-new"]),i(Nt,{ref_key:"delModal",ref:U,"temp-product":a(f),onClearInput:o,onCloseModal:p,onUpdate:l},null,8,["temp-product"])])],64)}}};export{fl as default};
