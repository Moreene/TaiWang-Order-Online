import{a as v}from"./axios-G2rPRu76.js";import{S as P,t as p}from"./sweetalert-sNZJvxHH.js";import{_ as L,m as A,a as M,h as b,o as c,c as i,i as _,b as t,F as m,t as r,d as k,n as j,r as E,e as l,j as x,w,f as h,S as y,v as C,p as U,g as O}from"./index-VVxu1vZx.js";import{c as S}from"./cartStore-bnnTZoxK.js";import{P as R}from"./ProgessBarComponent-E-GI2tvZ.js";import{L as q}from"./LoadingComponent-F-LtlRuz.js";const D="/TaiWang-Order-Online/empety-cart.png";var W={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/TaiWang-Order-Online/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:T,VITE_APIPATH:B}=W,z={components:{ProgessBarComponent:R,LoadingComponent:q},data(){return{coupon:"",delivery:"自取",isLoading:!0}},computed:{...A(S,["cart"])},methods:{...M(S,["increaseCartNum","decreaseCartNum","getCart"]),deleteItem(e){const s=e.product.title;P.mixin({customClass:{confirmButton:"btn btn-secondary text-light",cancelButton:"btn btn-outline-secondary me-16"},buttonsStyling:!1}).fire({title:`是否要刪除 ${s} ？`,icon:"warning",showCancelButton:!0,confirmButtonText:"是, 我要刪除",cancelButtonText:"我再想想",reverseButtons:!0}).then(f=>{f.isConfirmed&&v.delete(`${T}/api/${B}/cart/${e.id}`).then(()=>{p("top","warning",`已刪除 "${s}"`),this.getCart()}).catch(a=>{console.log(a)})})},useCoupon(){const e={code:this.coupon};v.post(`${T}/api/${B}/coupon`,{data:e}).then(()=>{p("top","success","已成功使用優惠代碼"),this.getCart(),this.coupon=""}).catch(()=>{p("top","error","優惠代碼使用失敗"),this.coupon=""})},goCheckout(){localStorage.setItem("pickUp",this.delivery),this.$router.push("/orderInfo")},copyCode(e){const s=this.$refs.code.innerText;navigator.clipboard.writeText(s).then(()=>{e.target.blur(),p("top","success","已成功複製優惠代碼")}).catch(()=>{p("top","error","複製優惠代碼失敗")})}},watch:{"cart.final_total":{handler(e){typeof e<"u"&&Math.round(e)<500&&(this.delivery="自取")},immediate:!0}},created(){setTimeout(()=>this.isLoading=!1,400)}},n=e=>(U("data-v-3c0d208d"),e=e(),O(),e),F={class:"bg-wave"},$={class:"container"},H={class:"col-lg-10 mx-auto"},J={class:"mb-48"},K={key:0,class:"h5 bg-gray text-light ps-12 py-16 mb-0"},Q={class:"table table-borderless mb-0"},Z=n(()=>t("thead",{class:"border-bottom border-dark text-nowrap"},[t("tr",{class:"text-center"},[t("th",{scope:"col",style:{width:"180px"}},"示意圖"),t("th",{scope:"col"},"餐點名稱"),t("th",{scope:"col"},"單價"),t("th",{scope:"col",style:{width:"250px"}},"數量"),t("th",{scope:"col",class:"d-none d-md-block"},"小計"),t("th",{scope:"col"},"刪除")])],-1)),G={class:"text-center text-nowrap"},X={scope:"row",class:"fw-normal"},Y=["src","alt"],tt={class:"text-notoSans"},et={class:"d-flex justify-content-center"},ot={class:"input-group w-75 d-flex align-items-end"},st=["onClick","disabled"],nt=n(()=>t("i",{class:"bi bi-dash"},null,-1)),at=[nt],lt=["onUpdate:modelValue"],ct=["onClick"],it=n(()=>t("i",{class:"bi bi-plus"},null,-1)),dt=[it],rt={class:"d-none d-md-table-cell"},pt={class:"text-notoSans"},ht=["onClick"],ut=n(()=>t("i",{class:"bi bi-trash fs-5 link-gray"},null,-1)),_t=[ut],bt={class:"border border-dark border-top-0 bg-white p-12"},mt={class:"d-flex justify-content-between"},yt=n(()=>t("i",{class:"bi bi-arrow-right"},null,-1)),ft=n(()=>t("span",{class:"text-notoSans d-inline-block p-6 bg-danger text-white me-6"},"優惠促銷",-1)),gt={class:"text-notoSans"},vt={ref:"code"},kt={class:"row gy-48 gy-md-0 pb-72"},xt={class:"col-md-7"},wt=n(()=>t("h2",{class:"h5 bg-gray text-light ps-12 py-16 mb-0"},"取餐方式",-1)),Ct={class:"border border-dark bg-white"},St={class:"ps-12 py-16"},Tt={class:"form-check form-check-inline"},Bt=n(()=>t("label",{class:"form-check-label",for:"pickup"},"自取",-1)),It={class:"form-check form-check-inline"},Vt=["disabled"],Nt=n(()=>t("label",{class:"form-check-label",for:"delivery"},[l("外送 "),t("span",{class:"text-gray"},"(折扣後滿500元)")],-1)),Pt={class:"border border-dark border-top-0 bg-white"},Lt=n(()=>t("h2",{class:"h5 bg-gray text-light ps-12 py-16 mb-0"},"送貨及付款方式",-1)),At={class:"ps-12 py-16"},Mt={class:"mb-16"},jt=n(()=>t("label",{for:"送貨方式",class:"form-label"},"送貨方式",-1)),Et={key:0,type:"text",id:"送貨方式",class:"form-control w-75",value:"自取",disabled:""},Ut={key:1,type:"text",id:"送貨方式",class:"form-control w-75",value:"泰汪小蜜蜂",disabled:""},Ot=n(()=>t("div",null,[t("label",{for:"付款方式",class:"form-label"},"付款方式"),t("input",{type:"text",id:"付款方式",class:"form-control w-75",value:"信用卡 (支援VISA、JCB、Master)",disabled:""})],-1)),Rt={class:"col-md-5"},qt={class:"h-100 border border-dark bg-white"},Dt=n(()=>t("h2",{class:"h5 bg-gray text-light ps-12 py-16 mb-0"},"訂單資訊",-1)),Wt={class:"border-bottom border-dark px-12 py-16"},zt={class:"d-flex justify-content-between"},Ft=n(()=>t("p",null,"小計：",-1)),$t={class:"text-notoSans"},Ht=n(()=>t("div",{class:"d-flex justify-content-between"},[t("p",null,"運費："),t("p",null,[l("NT$ "),t("span",{class:"text-notoSans"},"0")])],-1)),Jt=n(()=>t("p",{class:"mb-8"},"優惠代碼",-1)),Kt={class:"d-flex"},Qt=["disabled"],Zt={class:"px-12 py-24 pb-md-0"},Gt={class:"d-flex justify-content-between"},Xt=n(()=>t("p",{class:"fw-bold"},"合計：",-1)),Yt={class:"fw-bold"},te={class:"text-notoSans"},ee={key:0,class:"text-danger ms-4"},oe={key:1,class:"pb-72 text-center"},se=n(()=>t("h2",{class:"mb-16"},"Oops,目前購物車內沒有東西唷！",-1)),ne={class:"mb-32"},ae=n(()=>t("img",{src:D,class:"empety-cart",alt:"空購物車"},null,-1));function le(e,s,I,f,a,d){const V=b("LoadingComponent"),N=b("ProgessBarComponent"),g=b("RouterLink");return c(),i(m,null,[_(V,{active:a.isLoading,"onUpdate:active":s[0]||(s[0]=o=>a.isLoading=o)},null,8,["active"]),t("div",F,[t("div",$,[t("div",H,[_(N),e.cart.carts&&e.cart.carts.length?(c(),i(m,{key:0},[t("div",J,[e.cart.carts?(c(),i("h2",K,"購物車 ( "+r(e.cart.carts.length)+" ) ",1)):k("",!0),t("div",{class:j(["table-responsive border border-dark",{"fixed-height":e.cart.carts&&e.cart.carts.length>3}])},[t("table",Q,[Z,t("tbody",G,[(c(!0),i(m,null,E(e.cart.carts,o=>(c(),i("tr",{key:o.id,class:"align-middle border-bottom"},[t("th",X,[t("img",{src:o.product.imageUrl,alt:o.product.title,class:"food-img"},null,8,Y)]),t("td",null,r(o.product.title),1),t("td",null,[l("NT$ "),t("span",tt,r(o.product.price),1)]),t("td",null,[t("div",et,[t("div",ot,[t("button",{class:"btn btn-secondary text-light d-flex justify-content-center align-items-center d-none d-md-block",type:"button",onClick:u=>e.decreaseCartNum(o),disabled:o.qty===1},at,8,st),h(t("input",{type:"text",class:"form-control text-center p-0 py-md-6 px-md-12",min:"1","onUpdate:modelValue":u=>o.qty=u,readonly:""},null,8,lt),[[C,o.qty,void 0,{number:!0}]]),t("button",{class:"btn btn-secondary text-light d-flex justify-content-center align-items-center d-none d-md-block",type:"button",onClick:u=>e.increaseCartNum(o)},dt,8,ct)])])]),t("td",rt,[l("NT$ "),t("span",pt,r(o.qty*o.product.price),1)]),t("td",null,[t("a",{href:"#",onClick:w(u=>d.deleteItem(o),["prevent"])},_t,8,ht)])]))),128))])])],2),t("div",bt,[t("p",mt,[l("更多精彩優惠等著您使用！ "),_(g,{to:"/products",class:"link-gold"},{default:x(()=>[l("繼續購物 "),yt]),_:1})]),ft,t("span",gt,[l("輸入「 "),t("span",vt,"tai6666",512),l(" 」優惠代碼再享 85 折 ﹙"),t("a",{href:"#",class:"link-danger",onClick:s[1]||(s[1]=w(o=>d.copyCode(o),["prevent"]))},"點我複製"),l("﹚")])])]),t("div",kt,[t("div",xt,[wt,t("div",Ct,[t("div",St,[t("div",Tt,[Math.round(e.cart.final_total)<500?h((c(),i("input",{key:0,class:"form-check-input border-gray",type:"radio",name:"取餐方式",id:"pickup",value:"自取","onUpdate:modelValue":s[2]||(s[2]=o=>a.delivery=o),checked:""},null,512)),[[y,a.delivery]]):h((c(),i("input",{key:1,class:"form-check-input border-gray",type:"radio",name:"取餐方式",id:"pickup",value:"自取","onUpdate:modelValue":s[3]||(s[3]=o=>a.delivery=o)},null,512)),[[y,a.delivery]]),Bt]),t("div",It,[h(t("input",{class:"form-check-input border-gray",type:"radio",name:"取餐方式",id:"delivery",value:"外送","onUpdate:modelValue":s[4]||(s[4]=o=>a.delivery=o),disabled:Math.round(e.cart.final_total)<500},null,8,Vt),[[y,a.delivery]]),Nt])])]),t("div",Pt,[Lt,t("div",At,[t("div",Mt,[jt,a.delivery==="自取"||Math.round(e.cart.final_total)<500?(c(),i("input",Et)):(c(),i("input",Ut))]),Ot])])]),t("div",Rt,[t("div",qt,[Dt,t("div",Wt,[t("div",zt,[Ft,t("p",null,[l("NT$ "),t("span",$t,r(e.cart.total),1)])]),Ht,Jt,t("div",Kt,[h(t("input",{type:"text",class:"form-control w-50 border-gray","onUpdate:modelValue":s[5]||(s[5]=o=>a.coupon=o)},null,512),[[C,a.coupon]]),t("button",{class:"btn btn-secondary text-light ms-8",type:"button",disabled:a.coupon==="",onClick:s[6]||(s[6]=(...o)=>d.useCoupon&&d.useCoupon(...o))},"套用",8,Qt)])]),t("div",Zt,[t("div",Gt,[Xt,t("p",Yt,[l("NT$ "),t("span",te,r(Math.round(e.cart.final_total)),1),e.cart.final_total!==e.cart.total?(c(),i("span",ee,"(已使用優惠)")):k("",!0)])]),t("button",{type:"button",class:"btn btn-primary text-white w-100",onClick:s[7]||(s[7]=(...o)=>d.goCheckout&&d.goCheckout(...o))},"下一步")])])])])],64)):(c(),i("div",oe,[se,t("h2",ne,[l("快去"),_(g,{to:"/products",class:"link-secondary border-bottom border-secondary"},{default:x(()=>[l("選購")]),_:1}),l(" 想吃餐點吧")]),ae]))])])])],64)}const ue=L(z,[["render",le],["__scopeId","data-v-3c0d208d"]]);export{ue as default};
