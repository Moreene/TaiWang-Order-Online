import{s as m,S as g}from"./sweetalert--HSzbr_G.js";import{u as y,i as _,G as x,k as b,o as f,c as B,a as t,l as s,m as n,b as T,M as w,d as C,F as V,e as a}from"./index-qkiaYoID.js";import{a as i}from"./axios-G2rPRu76.js";var S={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/TaiWang-Order-Online/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const A={class:"navbar navbar-expand-md bg-dark py-16 fixed-top","data-bs-theme":"dark"},E={class:"container"},L=t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1),I={class:"navbar-nav me-auto mb-0"},P={class:"nav-item"},R=t("i",{class:"bi bi-box-arrow-in-left"},null,-1),N={class:"nav-item"},M=t("i",{class:"bi bi-clipboard"},null,-1),O={class:"nav-item"},$=t("i",{class:"bi bi-box-seam"},null,-1),z={class:"nav-item"},D=t("i",{class:"bi bi-copy"},null,-1),W={__name:"AdminView",setup(F){const{VITE_API:c}=S,l=y(),r=_(!1),u=_(null);function h(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1");e&&(i.defaults.headers.common.Authorization=e,i.post(`${c}/api/user/check`,{api_token:e}).then(()=>{r.value=!0}).catch(()=>{m("error","您沒有權限進入!"),l.push("/adminLogin")}))}function v(){const e=u.value;e!=null&&e.classList.contains("show")&&e.classList.remove("show")}function d(){const e=g.mixin({customClass:{confirmButton:"btn btn-primary text-light",cancelButton:"btn btn-outline-danger me-16"},buttonsStyling:!1});e.fire({title:"即將登出後台!",icon:"warning",showCancelButton:!0,cancelButtonText:"不要登出",confirmButtonText:"是，我要登出",reverseButtons:!0}).then(p=>{p.isConfirmed&&(e.fire({title:"即將登出!",icon:"success",timer:2e3}),setTimeout(()=>{i.post(`${c}/logout`).then(()=>{document.cookie="myToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC;",l.push("/adminLogin")}).catch(o=>{m("error",o.response.data.message)})},500))})}return x(()=>h()),(e,p)=>{const o=b("RouterLink"),k=b("RouterView");return f(),B(V,null,[t("nav",A,[t("div",E,[L,t("button",{type:"button",class:"btn btn-outline-light fs-6 d-md-none",onClick:d},"登出"),t("div",{class:"collapse navbar-collapse",id:"navbarSupportedContent",ref_key:"collapse",ref:u,onClick:v},[t("ul",I,[t("li",P,[s(o,{to:"/",class:"nav-link py-16 py-md-0 ps-0 fs-6"},{default:n(()=>[R,a(" 回到前台 ")]),_:1})]),t("li",N,[s(o,{to:"/admin/products",class:"nav-link py-16 py-md-0 fs-6"},{default:n(()=>[M,a(" 餐點列表 ")]),_:1})]),t("li",O,[s(o,{to:"/admin/orders",class:"nav-link py-16 py-md-0 fs-6"},{default:n(()=>[$,a(" 訂單列表 ")]),_:1})]),t("li",z,[s(o,{to:"/admin/coupon",class:"nav-link py-16 py-md-0 fs-6"},{default:n(()=>[D,a(" 優惠列表 ")]),_:1})])])],512),t("button",{type:"button",class:"btn btn-outline-light fs-6 d-none d-md-block",onClick:d},"登出")])]),T(r)?(f(),w(k,{key:0})):C("",!0)],64)}}};export{W as default};
