import{N as G,O as S,i as I,s as F,u as z,P as H,k as X,o as d,c as f,l as y,b as w,x as q,m as J,a as l,n as E,F as j,r as L,t as M,e as K}from"./index-WXTl0fys.js";import{u as Q}from"./useProductStore-cZnrYjLq.js";import{u as Y}from"./useCategoryStore-z1zrTGzc.js";import{B as Z}from"./BannerComponent-DbwTOUuf.js";import{_ as V,P as U}from"./PaginationComponent-gCVncB8Q.js";import{L as ee}from"./LoadingComponent-WMBPQsFW.js";import"./axios-G2rPRu76.js";import"./useCartStore-_lpLLSn2.js";import"./sweetalert-7F7hic-m.js";var te="Expected a function",W=NaN,ne="[object Symbol]",re=/^\s+|\s+$/g,oe=/^[-+]0x[0-9a-f]+$/i,ae=/^0b[01]+$/i,se=/^0o[0-7]+$/i,ie=parseInt,le=typeof S=="object"&&S&&S.Object===Object&&S,ue=typeof self=="object"&&self&&self.Object===Object&&self,ce=le||ue||Function("return this")(),de=Object.prototype,fe=de.toString,pe=Math.max,me=Math.min,B=function(){return ce.Date.now()};function ve(e,r,o){var a,v,_,p,s,m,g=0,T=!1,c=!1,h=!0;if(typeof e!="function")throw new TypeError(te);r=A(r)||0,N(o)&&(T=!!o.leading,c="maxWait"in o,_=c?pe(A(o.maxWait)||0,r):_,h="trailing"in o?!!o.trailing:h);function k(n){var b=a,P=v;return a=v=void 0,g=n,p=e.apply(P,b),p}function C(n){return g=n,s=setTimeout(x,r),T?k(n):p}function u(n){var b=n-m,P=n-g,R=r-b;return c?me(R,_-P):R}function i(n){var b=n-m,P=n-g;return m===void 0||b>=r||b<0||c&&P>=_}function x(){var n=B();if(i(n))return t(n);s=setTimeout(x,u(n))}function t(n){return s=void 0,h&&a?k(n):(a=v=void 0,p)}function O(){s!==void 0&&clearTimeout(s),g=0,a=m=v=s=void 0}function D(){return s===void 0?p:t(B())}function $(){var n=B(),b=i(n);if(a=arguments,v=this,m=n,b){if(s===void 0)return C(m);if(c)return s=setTimeout(x,r),k(m)}return s===void 0&&(s=setTimeout(x,r)),p}return $.cancel=O,$.flush=D,$}function N(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function be(e){return!!e&&typeof e=="object"}function ge(e){return typeof e=="symbol"||be(e)&&fe.call(e)==ne}function A(e){if(typeof e=="number")return e;if(ge(e))return W;if(N(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=N(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(re,"");var o=ae.test(e);return o||se.test(e)?ie(e.slice(2),o?2:8):oe.test(e)?W:+e}var ye=ve;const _e=G(ye),he={class:"container"},ke={class:"py-72 py-lg-90"},xe={class:"d-flex flex-column flex-lg-row justify-content-lg-between mb-48"},je={class:"nav nav-underline flex-nowrap text-nowrap overflow-x-auto mb-16 mb-lg-0",role:"tablist"},Te={class:"nav-item",role:"presentation"},Ce=["id","aria-controls","data-bs-target","onClick"],Pe={class:"w-75 w-md-50 w-lg-25 d-flex justify-content-lg-end"},we={class:"w-75"},Se={class:"tab-content"},Ie={class:"row gy-48"},Oe={key:1,class:"mb-0 fs-6 text-center"},Ue={__name:"ProductsView",setup(e){const r=I([]),o=I(""),a=I([]),v=Q(),{getProducts:_}=v,{products:p,isLoading:s}=F(v);_();const m=Y(),{categories:g}=F(m);function T(u){r.value=u}const c=I(null),h=z();function k(u,i){i.target.blur(),c.value&&c.value.resetPage(),u==="products"?(o.value="",a.value=[],h.push("/products")):(o.value="",a.value=[],h.push(`/categories/${u}`))}const C=_e(u=>{o.value=u.target.value,o.value.trim()!==""?a.value=p.value.filter(i=>i.title.match(o.value)):a.value=[]},800);return H(()=>C.cancel()),(u,i)=>{const x=X("RouterView");return d(),f(j,null,[y(ee,{active:w(s),"onUpdate:active":i[0]||(i[0]=t=>q(s)?s.value=t:null)},null,8,["active"]),y(Z,null,{default:J(()=>[K("線上訂餐 / Menu")]),_:1}),l("div",he,[l("div",ke,[l("div",xe,[l("ul",je,[l("li",Te,[l("button",{class:E(["nav-link fs-6",{active:u.$route.path==="/products"}]),id:"all-tab",type:"button",role:"tab","aria-controls":"all","data-bs-target":"#all","aria-selected":"true",onClick:i[1]||(i[1]=t=>k("products",t))},"所有餐點",2)]),(d(!0),f(j,null,L(w(g),t=>(d(),f("li",{key:t,class:"nav-item",role:"presentation"},[l("button",{class:E(["nav-link fs-6",{active:u.$route.path===`/categories/${t.path}`}]),id:t.name+"-tab",type:"button",role:"tab","aria-controls":t.name,"data-bs-target":"#"+t.name,"aria-selected":"false",onClick:O=>k(t.path,O)},M(t.name),11,Ce)]))),128))]),l("div",Pe,[l("div",we,[l("input",{type:"text",class:"form-control rounded-0 border-top-0 border-start-0 border-end-0",placeholder:"請輸入關鍵字...",onInput:i[2]||(i[2]=(...t)=>w(C)&&w(C)(...t))},null,32)])])]),l("div",Se,[l("div",{class:E(["tab-pane show",{active:u.$route.path==="/products"}]),id:"all",role:"tabpanel","aria-labelledby":"all-tab",tabindex:"0"},[l("div",Ie,[a.value.length?(d(),f(j,{key:0},[(d(!0),f(j,null,L(a.value,t=>(d(),f("div",{class:"col-md-4 col-lg-3 mb-48",key:t.id},[y(U,{item:t},null,8,["item"])]))),128)),y(V,{products:a.value,onUpdateProducts:T,ref_key:"pagination",ref:c},null,8,["products"])],64)):o.value!==""&&!a.value.length?(d(),f("p",Oe,"抱歉，沒有符合「 "+M(o.value)+" 」的餐點唷！",1)):(d(),f(j,{key:2},[(d(!0),f(j,null,L(r.value,t=>(d(),f("div",{class:"col-md-4 col-lg-3 mb-48",key:t.id},[y(U,{item:t},null,8,["item"])]))),128)),y(V,{products:w(p),onUpdateProducts:T,ref_key:"pagination",ref:c},null,8,["products"])],64))])],2),y(x,{"match-products":a.value,"key-word":o.value},null,8,["match-products","key-word"])])])])],64)}}};export{Ue as default};
